<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta name="author" content="Nic Freeman" />
<meta name="generator" content="LaTeX Lwarp package" />
<meta name="description" content="MAS352/452/6052 Stochastic Processes and Financial Mathematics, Sheffield University, September 15, 2021." />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<title>MASx52 — Further extensions </title>
<link rel="stylesheet" type="text/css" href="sans-serif-lwarp-sagebrush.css" />


<script>
// Lwarp MathJax emulation code
//
// Based on code by Davide P. Cervone.
// Equation numbering: https://github.com/mathjax/MathJax/issues/2427
// Starred and ifnextchar macros: https://github.com/mathjax/MathJax/issues/2428
//
// Modified by Brian Dunn to adjust equation numbering and add subequations.
//
// LaTeX can use \seteqnumber{subequations?}{section}{number} before each equation.
// subequations? is 0 usually, 1 if inside subequations.
// section is a string printed as-is, or empty.
// number is auto-incremented by MathJax between equations.
//
MathJax = {
     subequations: "0",
     section: "",
     loader: {
         load: ['[tex]/tagFormat'],
     },
     startup: {
         ready() {
             //       These would be replaced by import commands if you wanted to make
             //       a proper extension.
             const Configuration = MathJax._.input.tex.Configuration.Configuration;
             const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
             const Macro = MathJax._.input.tex.Symbol.Macro;
             const TexError = MathJax._.input.tex.TexError.default;
             const ParseUtil = MathJax._.input.tex.ParseUtil.default;
             const expandable = MathJax._.util.Options.expandable;


             //       Insert the replacement string into the TeX string, and check
             //       that there haven't been too many maxro substitutions (prevents
             //       infinite loops).
             const useArgument = (parser, text) => {
                  parser.string = ParseUtil.addArgs(parser, text, parser.string.slice(parser.i));
                  parser.i = 0;
                  if (++parser.macroCount > parser.configuration.options.maxMacros) {
                      throw new TexError('MaxMacroSub1',
                      'MathJax maximum macro substitution count exceeded; ' +
                      'is there a recursive macro call?');
                  }
             }


             //       Create the command map for \ifstar, \ifnextchar, \seteqnumber
             new CommandMap('ifstar-ifnextchar-setequnumber', {
                  ifstar: 'IfstarFunction',
                  ifnextchar: 'IfnextcharFunction',
                  seteqnumber: 'SeteqnumberFunction'
             }, {
                  //      This function implements an ifstar macro.
                  IfstarFunction(parser, name) {
                      const resultstar = parser.GetArgument(name);
                      const resultnostar = parser.GetArgument(name);
                      const star = parser.GetStar();                        // true if there is a *
                      useArgument(parser, star ? resultstar : resultnostar);
                  },


                  //      This function implements an ifnextchar macro.
                  IfnextcharFunction(parser, name) {
                      let whichchar = parser.GetArgument(name);
                      if (whichchar.match(/^(?:0x[0-9A-F]+|[0-9]+)$/i)) {
                          // $ syntax highlighting
                          whichchar = String.fromCodePoint(parseInt(whichchar));
                      }
                      const resultnextchar = parser.GetArgument(name);
                      const resultnotnextchar = parser.GetArgument(name);
                      const gotchar = (parser.GetNext() === whichchar);
                      useArgument(parser, gotchar ? resultnextchar : resultnotnextchar);
                  },


                  //      This function modifies the equation numbers.
                  SeteqnumberFunction(parser, name) {
                          //   Get the macro parameters
                          const star = parser.GetStar();                       // true if there is a *
                          const optBrackets = parser.GetBrackets(name);        // contents of optional brackets
                          const newsubequations = parser.GetArgument(name);       // the subequations argument
                          const neweqsection = parser.GetArgument(name);       // the eq section argument
                          const neweqnumber = parser.GetArgument(name);        // the eq number argument
                          MathJax.config.subequations=newsubequations ;        // a string with boolean meaning
                          MathJax.config.section=neweqsection ;                // a string with numeric meaning
                          parser.tags.counter = parser.tags.allCounter = neweqnumber ;
                  }
             });


             //       Create the ifstar-ifnextchar-setequnumber package
             Configuration.create('ifstar-ifnextchar-setequnumber', {
                  handler: {macro: ['ifstar-ifnextchar-setequnumber']}
             });


             MathJax.startup.defaultReady();


             // For forward references:
             MathJax.startup.input[0].preFilters.add(({math}) => {
                  if (math.inputData.recompile){
                          MathJax.config.subequations = math.inputData.recompile.subequations;
                          MathJax.config.section = math.inputData.recompile.section;
                  }
             });
             MathJax.startup.input[0].postFilters.add(({math}) => {
                  if (math.inputData.recompile){
                          math.inputData.recompile.subequations = MathJax.config.subequations;
                          math.inputData.recompile.section = MathJax.config.section;
                  }
             });
         }       // ready
     },           // startup


     tex: {
         packages: {'[+]': ['tagFormat', 'ifstar-ifnextchar-setequnumber']},
         tags: "ams",
                  tagFormat: {
                          number: function (n) {
                               if(MathJax.config.subequations==0)
                                      return(MathJax.config.section + n);
                               else
                                      return(MathJax.config.section + String.fromCharCode(96+n));
                          },
                  },
     }
}
</script>


<script
         id="MathJax-script"
         src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
></script>


</head>
<body>



<a id="notes_2-autopage-171"></a>
<nav class="topnavigation" ><a href="notes_2.html" class="linkhome" >
Home</a></nav>

<header>

<p>
last updated: September 15, 2021
</p>

</header>



<div class="bodyandsidetoc" >
<div class="sidetoccontainer" >



<nav class="sidetoc" >



<div class="sidetoctitle" >

<p>
<span class="sidetocthetitle" >Stochastic Processes and Financial Mathematics<br />
(part two)</span>
</p>

<p>
Contents
</p>
</div>



<div class="sidetoccontents" >

<p>
<a href="notes_2.html" class="linkhome" >
Home</a>
</p>

<p>
<a href="The-transition-continuous-time.html#autosec-5" class="tocchapter" >
<span class="sectionnumber" >9</span>&#x2003;The transition to continuous time</a>
</p>



<p>
<a href="Brownian-motion.html#autosec-11" class="tocchapter" >
<span class="sectionnumber" >10</span>&#x2003;Brownian motion</a>
</p>



<p>
<a href="Brownian-motion.html#autosec-12" class="tocsection" >
<span class="sectionnumber" >10.1</span>&#x2003;The limit of random walks</a>
</p>



<p>
<a href="Brownian-motion-definition.html#autosec-19" class="tocsection" >
<span class="sectionnumber" >10.2</span>&#x2003;Brownian motion (definition)</a>
</p>



<p>
<a href="Brownian-motion-heat-equation.html#autosec-26" class="tocsection" >
<span class="sectionnumber" >10.3</span>&#x2003;Brownian motion and the heat equation</a>
</p>



<p>
<a href="Properties-Brownian-motion.html#autosec-32" class="tocsection" >
<span class="sectionnumber" >10.4</span>&#x2003;Properties of Brownian motion</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-bm.html#autosec-41" class="tocsection" >
<span class="sectionnumber" >10.5</span>&#x2003;Exercises on Chapter <a href="Brownian-motion.html#chap:bm">10</a></a>
</p>



<p>
<a href="Stochastic-integration.html#autosec-45" class="tocchapter" >
<span class="sectionnumber" >11</span>&#x2003;Stochastic integration</a>
</p>



<p>
<a href="Stochastic-integration.html#autosec-46" class="tocsection" >
<span class="sectionnumber" >11.1</span>&#x2003;Introduction to Ito calculus</a>
</p>



<p>
<a href="Ito-integrals.html#autosec-51" class="tocsection" >
<span class="sectionnumber" >11.2</span>&#x2003;Ito integrals</a>
</p>



<p>
<a href="Existence-Ito-integrals.html#autosec-55" class="tocsection" >
<span class="sectionnumber" >11.3</span>&#x2003;Existence of Ito integrals \((\star )\)</a>
</p>



<p>
<a href="Ito-processes.html#autosec-60" class="tocsection" >
<span class="sectionnumber" >11.4</span>&#x2003;Ito processes</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-ito.html#autosec-68" class="tocsection" >
<span class="sectionnumber" >11.5</span>&#x2003;Exercises on Chapter <a href="Stochastic-integration.html#chap:ito">11</a></a>
</p>



<p>
<a href="Stochastic-differential-equations.html#autosec-72" class="tocchapter" >
<span class="sectionnumber" >12</span>&#x2003;Stochastic differential equations</a>
</p>



<p>
<a href="Stochastic-differential-equations.html#autosec-76" class="tocsection" >
<span class="sectionnumber" >12.1</span>&#x2003;Ito’s formula</a>
</p>



<p>
<a href="Geometric-Brownian-motion.html#autosec-84" class="tocsection" >
<span class="sectionnumber" >12.2</span>&#x2003;Geometric Brownian motion</a>
</p>



<p>
<a href="Stochastic-exponentials-martingale-representation.html#autosec-87" class="tocsection" >
<span class="sectionnumber" >12.3</span>&#x2003;Stochastic exponentials and martingale representation</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-sdes.html#autosec-93" class="tocsection" >
<span class="sectionnumber" >12.4</span>&#x2003;Exercises on Chapter <a href="Stochastic-differential-equations.html#chap:sdes">12</a></a>
</p>



<p>
<a href="Connections-between-SDEs-PDEs.html#autosec-98" class="tocchapter" >
<span class="sectionnumber" >13</span>&#x2003;Connections between SDEs and PDEs</a>
</p>



<p>
<a href="Connections-between-SDEs-PDEs.html#autosec-99" class="tocsection" >
<span class="sectionnumber" >13.1</span>&#x2003;The Feynman-Kac formula</a>
</p>



<p>
<a href="The-Markov-property.html#autosec-107" class="tocsection" >
<span class="sectionnumber" >13.2</span>&#x2003;The Markov property</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-fk.html#autosec-110" class="tocsection" >
<span class="sectionnumber" >13.3</span>&#x2003;Exercises on Chapter <a href="Connections-between-SDEs-PDEs.html#chap:fk">13</a></a>
</p>



<p>
<a href="The-Black-Scholes-model.html#autosec-114" class="tocchapter" >
<span class="sectionnumber" >14</span>&#x2003;The Black-Scholes model</a>
</p>



<p>
<a href="The-Black-Scholes-model.html#autosec-115" class="tocsection" >
<span class="sectionnumber" >14.1</span>&#x2003;The Black-Scholes market</a>
</p>



<p>
<a href="Completeness.html#autosec-123" class="tocsection" >
<span class="sectionnumber" >14.2</span>&#x2003;Completeness</a>
</p>



<p>
<a href="The-Black-Scholes-equation.html#autosec-130" class="tocsection" >
<span class="sectionnumber" >14.3</span>&#x2003;The Black-Scholes equation</a>
</p>



<p>
<a href="Martingales-risk-neutral-world.html#autosec-137" class="tocsection" >
<span class="sectionnumber" >14.4</span>&#x2003;Martingales and ‘the risk-neutral world’</a>
</p>



<p>
<a href="The-Black-Scholes-formula.html#autosec-141" class="tocsection" >
<span class="sectionnumber" >14.5</span>&#x2003;The Black-Scholes formula</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-bs.html#autosec-144" class="tocsection" >
<span class="sectionnumber" >14.6</span>&#x2003;Exercises on Chapter <a href="The-Black-Scholes-model.html#chap:bs">14</a></a>
</p>



<p>
<a href="Application-extension-Black-Scholes-model.html#autosec-150" class="tocchapter" >
<span class="sectionnumber" >15</span>&#x2003;Application and extension of the Black-Scholes model</a>
</p>



<p>
<a href="Application-extension-Black-Scholes-model.html#autosec-151" class="tocsection" >
<span class="sectionnumber" >15.1</span>&#x2003;Transaction costs and parity relations</a>
</p>



<p>
<a href="The-Greeks.html#autosec-155" class="tocsection" >
<span class="sectionnumber" >15.2</span>&#x2003;The Greeks</a>
</p>



<p>
<a href="Delta-Gamma-Hedging.html#autosec-158" class="tocsection" >
<span class="sectionnumber" >15.3</span>&#x2003;Delta and Gamma Hedging</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-bs_extensions.html#autosec-165" class="tocsection" >
<span class="sectionnumber" >15.4</span>&#x2003;Exercises on Chapter <a href="Application-extension-Black-Scholes-model.html#chap:bs_extensions">15</a></a>
</p>



<p>
<a href="Further-extensions.html#autosec-172" class="tocsection" >
<span class="sectionnumber" >15.5</span>&#x2003;Further extensions \((\star )\)</a>
</p>



<p>
<a href="The-financial-crisis-2007-08.html#autosec-188" class="tocchapter" >
<span class="sectionnumber" >16</span>&#x2003;The financial crisis of 2007/08 \((\star )\)</a>
</p>



<p>
<a href="Financial-networks.html#autosec-199" class="tocchapter" >
<span class="sectionnumber" >17</span>&#x2003;Financial networks \((\Delta )\)</a>
</p>



<p>
<a href="Financial-networks.html#autosec-200" class="tocsection" >
<span class="sectionnumber" >17.1</span>&#x2003;Graphs and random graphs \((\Delta )\)</a>
</p>



<p>
<a href="The-Gai-Kapadia-model-debt-contagion.html#autosec-206" class="tocsection" >
<span class="sectionnumber" >17.2</span>&#x2003;The Gai-Kapadia model of debt contagion \((\Delta )\)</a>
</p>



<p>
<a href="Approximating-contagion-Galton-Watson-process.html#autosec-213" class="tocsection" >
<span class="sectionnumber" >17.3</span>&#x2003;Approximating contagion by a Galton-Watson process \((\Delta )\)</a>
</p>



<p>
<a href="Modelling-discussion-on-financial-networks.html#autosec-215" class="tocsection" >
<span class="sectionnumber" >17.4</span>&#x2003;Modelling discussion on financial networks \((\Delta )\)</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-fin_net.html#autosec-218" class="tocsection" >
<span class="sectionnumber" >17.5</span>&#x2003;Exercises on Chapter <a href="Financial-networks.html#chap:fin_net">17</a></a>
</p>



<p>
<a href="Solutions-exercises.html#autosec-226" class="tocchapter" >
<span class="sectionnumber" >C</span>&#x2003;Solutions to exercises</a>
</p>



<p>
<a href="Advice-revision-exams.html#autosec-239" class="tocchapter" >
<span class="sectionnumber" >D</span>&#x2003;Advice for revision/exams</a>
</p>



<p>
<a href="Formula-sheet-part-two.html#autosec-243" class="tocchapter" >
<span class="sectionnumber" >E</span>&#x2003;Formula sheet (part two)</a>
</p>



</div>

</nav>

</div>



<div class="bodycontainer" >



<section class="textbody" >

<h1>Stochastic Processes and Financial Mathematics<br />
(part two)</h1>

<!--MathJax customizations:-->



<div class="hidden" >

\(\newcommand{\footnotename}{footnote}\)

\(\def \LWRfootnote {1}\)

\(\newcommand {\footnote }[2][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\newcommand {\footnotemark }[1][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\newcommand \ensuremath [1]{#1}\)

\(\newcommand {\LWRframebox }[2][]{\fbox {#2}} \newcommand {\framebox }[1][]{\LWRframebox } \)

\(\newcommand {\setlength }[2]{}\)

\(\newcommand {\addtolength }[2]{}\)

\(\newcommand {\setcounter }[2]{}\)

\(\newcommand {\addtocounter }[2]{}\)

\(\newcommand {\cline }[1]{}\)

\(\newcommand {\directlua }[1]{\text {(directlua)}}\)

\(\newcommand {\luatexdirectlua }[1]{\text {(directlua)}}\)

\(\newcommand {\protect }{}\)

\(\def \LWRabsorbnumber #1 {}\)

\(\def \LWRabsorbquotenumber &quot;#1 {}\)

\(\def \mathchar {\ifnextchar &quot;\LWRabsorbquotenumber \LWRabsorbnumber }\)

\(\def \mathcode #1={\mathchar }\)

\(\let \delcode \mathcode \)

\(\let \delimiter \mathchar \)

\(\let \LWRref \ref \)

\(\renewcommand {\ref }{\ifstar \LWRref \LWRref }\)

\(\newcommand {\intertext }[1]{\text {#1}\notag \\}\)

\(\DeclareMathOperator {\var }{var}\)

\(\DeclareMathOperator {\cov }{cov}\)

\(\DeclareMathOperator {\indeg }{deg_{in}}\)

\(\DeclareMathOperator {\outdeg }{deg_{out}}\)

\(\newcommand {\nN }{n \in \mathbb {N}}\)

\(\newcommand {\Br }{{\cal B}(\R )}\)

\(\newcommand {\F }{{\cal F}}\)

\(\newcommand {\ds }{\displaystyle }\)

\(\newcommand {\st }{\stackrel {d}{=}}\)

\(\newcommand {\uc }{\stackrel {uc}{\rightarrow }}\)

\(\newcommand {\la }{\langle }\)

\(\newcommand {\ra }{\rangle }\)

\(\newcommand {\li }{\liminf _{n \rightarrow \infty }}\)

\(\newcommand {\ls }{\limsup _{n \rightarrow \infty }}\)

\(\newcommand {\limn }{\lim _{n \rightarrow \infty }}\)

\(\def \ra {\Rightarrow }\)

\(\def \to {\rightarrow }\)

\(\def \iff {\Leftrightarrow }\)

\(\def \sw {\subseteq }\)

\(\def \wt {\widetilde }\)

\(\def \mc {\mathcal }\)

\(\def \mb {\mathbb }\)

\(\def \sc {\setminus }\)

\(\def \v {\textbf }\)

\(\def \p {\partial }\)

\(\def \E {\mb {E}}\)

\(\def \P {\mb {P}}\)

\(\def \R {\mb {R}}\)

\(\def \C {\mb {C}}\)

\(\def \N {\mb {N}}\)

\(\def \Q {\mb {Q}}\)

\(\def \Z {\mb {Z}}\)

\(\def \B {\mb {B}}\)

\(\def \~{\sim }\)

\(\def \-{\,;\,}\)

\(\def \|{\,|\,}\)

\(\def \qed {$\blacksquare $}\)

\(\def \1{\unicode {x1D7D9}}\)

\(\def \cadlag {c\‘{a}dl\‘{a}g}\)

\(\def \p {\partial }\)

\(\def \l {\left }\)

\(\def \r {\right }\)

\(\def \F {\mc {F}}\)

\(\def \G {\mc {G}}\)

\(\def \H {\mc {H}}\)

\(\def \Om {\Omega }\)

\(\def \om {\omega }\)

\(\def \Vega {\mc {V}}\)

</div>

<p>
<h4 id="autosec-172"><span class="sectionnumber" >15.5&#x2003;</span>Further extensions \((\star )\)</h4>
<a id="notes_2-autopage-172"></a>
<a id="notes_2-autofile-29"></a> <a id="sec:further_extensions"></a>

<p>
In this section we briefly survey a number of further ways in which the standard Black-Scholes model is often extended. Again, we follow our strategy of keeping things simple by studying each extension in isolation.
</p>

<p>
Note that the whole section of Section <a href="Further-extensions.html#sec:further_extensions">15.5</a> is off-syllabus, and marked with \((\star )\)s.
</p>
<h5 id="autosec-173">Time inhomogeneity \((\star )\)</h5>
<a id="notes_2-autopage-173"></a>



<p>
We’ve kept the model parameters \(r,\mu \) and \(\sigma \) as fixed, deterministic constants throughout our analysis of the Black-Scholes model. In fact, there is no need to do so. It is common to allow \(\mu \)
and \(\sigma \) to depend on both \(t\) and \(S_t\), written \(\mu (t,S_t)\) and \(\sigma (t,S_t)\).
</p>

<p>
The situation for \(r\) is similar. It is common to allow \(r\) to depend on \(t\), but not on \(S_t\), written simply \(r(t)\). The for this choice is simply that reason interest rates are generally not thought to
be dependent on stock prices. Moreover, interest rates tend to vary much more slowly than stock prices, and it is not unusual to assume that \(r\) is constant.
</p>

<p>
Allowing \(r\), \(\mu \) and \(\sigma \) to vary makes the problem of parameter inference much more difficult, but it is easily absorbed (without major changes) into the pricing theory that we’ve studied in this
course. Essentially, the reason that no major changes occur is that our use of Ito’s formula did not ever require us to differentiate \(r\), \(\mu \) or \(\sigma \).
</p>

<p>
In the situation where \(r=r(t)\), \(\mu =\mu (t,S_t)\) and \(\sigma =\sigma (t,S_t)\), it turns out that the risk neutral valuation formula for the contingent claim \(\Phi (S_T)\) turns into
</p>

<p>
\[\Pi _t=e^{-\int _t^T r(u)\,du}\,\E _{t,S_t}^\Q \l [\Phi (S_T)\r ],\]
</p>

<p>
where the risk neutral world \(\Q \) has the dynamics of \(S\) as
</p>

<p>
\[dS_t=r(t)S_t\,dt+\sigma (t,S_t)S_t\,dB_t.\]
</p>

<p>
It is easily seen that this generalizes the version of risk-neutral valuation that we proved in Theorem <a href="The-Black-Scholes-equation.html#thm:bs_repl">14.3.1</a>: when \(r\) is constant we have
\(\int _t^Tr\,du=r(T-t)\). Note, though, that in this case we don’t have the explicit formula <span class="textup" >(<a href="The-Black-Scholes-formula.html#eq:gbm_tT">14.20</a>)</span> for
\(S_T\) in terms of \(S_t\).
</p>
<h5 id="autosec-174">American and Exotic options \((\star )\)</h5>
<a id="notes_2-autopage-174"></a>



<a id="sec:exotics"></a>

<p>
We have generally used European call (and sometimes put) options as our canonical examples of financial derivatives. Whilst European call and put options are traded on many stocks, the most common type of
financial derivative is actually the <i>American</i> call/put option.
</p>

<p>
In all our previous work, we assumed that the exercise time \(T\) of an option was agreed in advance, and was deterministic. <b>American options</b> are options in which the holder can choose when to exercise
the option. For example, an American call option with strike \(K\) and ‘final’ exercise date \(T\), gives the holder the right to buy one unit of stock \(S_t\) for a (pre-agreed, deterministic) strike price \(K\) <i>at
a time of their own choosing</i> during \([0,T]\).
</p>

<p>
The time \(\tau \) at which the holder chooses to exercise their right to buy may depend on the current value of the stock price. As a result, the argument that we used to derive the prices (in Section <a
href="The-Black-Scholes-equation.html#sec:bs_eq">14.3</a>) breaks down. The underlying cause is that they relate to a family of PDEs that are much more difficult to handle than the standard
Black-Scholes PDEs – and for which Feynman-Kac formulas are not known to exist. In some special cases (including the case of American call options) explicit hedging strategies that are known, which allow explicit
formulas for prices to be found, but in general numerical techniques are the only option.
</p>
<div class="theorembodyremark" >

<ul style="list-style-type:none">



<a id="autoid-141"></a>

<li>

<p>
<span class="theoremheaderplain" >Remark 15.5.1</span> <a id="autoid-142" ></a >\((\Delta )\) To be precise, what American options lead too, in place of the risk-neutral valuation formula, is a
so-called ‘optimal stopping problem’: their value is given by
</p>

<span class="hidden" > \(\seteqnumber{0}{15.}{4}\)</span>

<!--



                                                                max EQ e−rτ Φ(Sτ )                                                            (15.5)
                                                                                
                                                                                                                                                                             --><a id="eq:op_stop_prob"></a><!--
                                                                 τ




-->

<p>


\begin{equation}
\label {eq:op_stop_prob} \max _\tau \E ^\Q \l [e^{-r\tau }\Phi (S_\tau )\r ]
\end{equation}


</p>

<p>
where the max is taken over stopping times \(\tau \). The optimal stopping problem is to identify the stopping time \(\tau \) at which the maximum occurs.
</p>

<p>
Optimal stopping problems are generally quite difficult, and the mathematics needed to attack <span class="textup" >(<a href="Further-extensions.html#eq:op_stop_prob">15.5</a>)</span> is outside of
the scope of what we can cover in this course.
</p>


</li>

</ul>

</div>

<p>
Another interesting class of financial derivatives are <b>exotic options</b>. This is a general term used for options in which the contingent claim is either complicated to write down, or simply of an unusual form.
They include
</p>
<ul style="list-style-type:none">


<li>
<p>
1. <b>digital options</b>, which give a fixed payoff if (and only if) the stock price is above a particular threshold;
</p>


</li>
<li>
<p>
2. <b>barrier options</b>, in which the exercise rights of the holder vary according to whether the stock price has crossed particular thresholds;
</p>


</li>
<li>
<p>
3. <b>Asian options</b>, whose payoff depends on the average price of the underlying asset during a particular time period;
</p>
</li>
</ul>

<p>
and many other variants (such as cliquet, rainbow, lookback, chooser, Bermudean, \(\ldots \)). Often such options are not traded on stock exchanges because there is insufficient demand for their individual
characteristics. As a result, their prices are agreed through direct discussions between the two (or more) parties involved in the contract. We don’t attempt to make a catalogue of the theory of pricing such options.
If you want to see some examples, there are plenty in Chapters 11-14 of the book ‘The Mathematics of Financial Derivatives’ by Wilmott, Howison and Dewynne.
</p>
<div class="theorembodyremark" >

<ul style="list-style-type:none">



<a id="autoid-143"></a>

<li>

<p>
<span class="theoremheaderplain" >Remark 15.5.2</span> <a id="autoid-144" ></a >In Section <a href="Completeness.html#sec:bs_compl">14.2</a> we were careful to write our contingent claims as
\(X\), rather than \(\Phi (S_T)\). The reason is that the argument we gave for the Theorem <a href="Completeness.html#thm:bs_compl">14.2.5</a>, which essentially stated that the Black-Scholes market
was complete, relied only on the fact that \(X\in m\mc {F}_T\) (and not on having the form \(X=\Phi (S_T)\)).
</p>

<p>
As a consequence, we do know that most types of exotic option can be hedged in the Black-Scholes model – but, in general, we don’t know how to find the replicating portfolios.
</p>


</li>

</ul>

</div>
<h5 id="autosec-177">Discontinuous stock prices and heavy tails \((\star )\)</h5>
<a id="notes_2-autopage-177"></a>



<a id="sec:discont"></a>

<p>
We now begin to move further afield, towards some serious extensions of the standard Black-Scholes model.
</p>

<p>
The following graph shows the Standard &amp; Poor’s 500 index, usually known in short as the S&amp;P 500, during 1987. It is essentially an averaged value of the stock prices of the top 500 companies within the
American stock market<sup>1</sup>. The S&amp;P 500 is widely regarded as one of the best ways of representing, in a single number, the value of stocks within the U.S.&nbsp;stock markets. We won’t go into
exactly how the ‘average’ is taken.
</p>
<div class="center" >

<p>


<a href="black_monday.png" target="_blank" ><img
      src="black_monday.png"
      style="
      width:260pt;
      "
      class="inlineimage"
      alt="(image)"
></a>
</p>
</div>

<p>
The feature of the graph that grabs our immediate attention is the huge fall, which occurs on Monday 19<sup>th</sup> October 1987. This date has become known as <i>Black Monday</i>. We see an
instantaneous drop, with apparently no warning, in which the S&amp;P 500 loses nearly 30% of its value. This is its largest fall ever, over twice the magnitude of the second largest fall (which you may remember: it
occurred on 15<sup>th</sup> October 2008).
</p>
<div class="theorembodyremark" >

<ul style="list-style-type:none">



<a id="autoid-145"></a>

<li>

<p>
<span class="theoremheaderplain" >Remark 15.5.3</span> <a id="autoid-146" ></a >Something which may strike you as very strange: <i>no</i> single explanation for the Black Monday crash has ever
been found. There are various theories as to what triggered the crash, ranging from a sudden lack liquidity to sudden implementations of new pricing methodology. It is often claimed that some <i>high-frequency
trading algorithms</i> (which were relatively new, at the time) were programmed to automatically sell stocks when they saw them drop; meaning that once a small crash occurred there was suddenly a huge number
of investors wanting to sell, exacerbating the drop in prices. However, in this case the largest drops occurred when trading volumes were low, meaning that high frequency trading is unlikely to be the full explanation.
</p>


</li>

</ul>

</div>

<p>
Of the many stock market crashes that have occurred in history, one other deserves special mention: the financial crisis of 2007-8. We will discuss it (briefly) in Chapter <a
href="The-financial-crisis-2007-08.html#chap:2008">16</a>. For now, let us focus on how we might incorporate rare, but sudden, downward drops in prices into the Black-Scholes model.
</p>

<p>
A rapid downward drop in prices is best represented by a discontinuity (downwards) in the stock price. However, the theory of Ito integration that we developed only worked for continuous stochastic process. In
fact, a theory of Ito integration that can handle discontinuities does exist, but it requires much heavier use of analysis than the version we developed. The complication is that, in continuous time, we need to be clear
about what information is known <i>instantaneously before</i> a jump takes place – we cannot allow ourselves to foresee the jump, since this would be unrealistic. Doing so necessitates much more careful use of
\(\sigma \)-fields, filtrations and left/right-continuity than we saw in Chapter <a href="Stochastic-integration.html#chap:ito">11</a>.
</p>

<p>
Happily, there is a generalization of Brownian motion, known as a <i>Le&#x0301;vy process</i>, which naturally incorporates unpredictable jumps, both upwards and/or downwards. It turns out that
Le&#x0301;vy processes are intimately connected to heavy tailed random variables (that is, where \(\E [X]\) or \(\E [X^2]\) is not defined). This, in turn, means we need a further extension of Ito calculus, to
remove our reliance on \(\mc {H}^2\) and allow for infinite means and variances. After all this theoretical work, we can then build versions of the Black-Scholes model that incorporate the possibility of rare, but
unpredictable, jumps in stock prices.
</p>

<p>
To summarize: such extensions are possible (and exist, and are used), but they are much harder to work with.
</p>
<div class="footnotes" >

<p>
<sup>1</sup>&nbsp;Including both the NYSE and the NASDAQ.
</p>

</div>
<h5 id="autosec-181">Volatility \((\star )\)</h5>
<a id="notes_2-autopage-181"></a>



<p>
Let us begin to think a little about what we would need to do to make use of the model, within a real market.
</p>

<p>
It is clear that we would need estimates of the parameters \(r\) and \(\sigma \) (we don’t need to know \(\mu \), because it has no effect on arbitrage free prices). Estimating the interest rate \(r\) is often rather
easy, because interests rates don’t change quickly and they are <i>chosen</i> by banks, who generally also make them public information; so we won’t worry about \(r\).
</p>

<p>
It is much harder to estimate the volatility \(\sigma \). We focus on this issue for the remainder of this section.
</p>
<h6 id="autosec-182">Historical volatility \((\star )\)</h6>
<a id="notes_2-autopage-182"></a>



<p>
One obvious idea is to estimate the future volatility based on the stock prices that we have observed in the recent past. Let us discuss one method for doing so.
</p>

<p>
Recall that our stock price process follows
</p>

<p>
\[dS_t=\mu S_t\,dt+\sigma S_t\,dB_t\]
</p>

<p>
which, as we saw in Section <a href="Geometric-Brownian-motion.html#sec:gbm">12.2</a>, has solution
</p>

<p>
\[S_t=S_0\exp \l ((\mu -\tfrac 12\sigma ^2)t+\sigma B_t\r ).\]
</p>

<p>
We fix \(\epsilon &gt;0\) and set \(t_i=i\epsilon \). We look at our historical data and find the values of \(S_t\) at times \(t=t_i\), which we assume to all be in the past. Fix some \(n\in \N \) and for
\(i=1,\ldots ,n\) define
</p>

<p>
\[\xi _i=\log \l (\frac {S_{t_i}}{S_{t_{i-1}}}\r ).\]
</p>

<p>
This gives us that
</p>

<p>
\[\xi _i=\l (\mu -\frac {\sigma ^2}{2}\r )\epsilon + \sigma \l (B_{t_i}-B_{t_{i-1}}\r ).\]
</p>

<p>
Using the independence properties of Brownian motion, we have that the \((\xi _i)_{i=1}^n\) are i.i.d.&nbsp;random variables with common distribution
</p>

<p>
\[N\l [(\mu -\tfrac {\sigma ^2}{2})\epsilon ,\;\sigma ^2\epsilon \r ].\]
</p>

<p>
We can estimate their (common) variance \(\epsilon \sigma ^2\) by the sample variance:
</p>

<p>
\[\epsilon \sigma ^2 \approx \frac {1}{n-1}\sum \limits _{i=1}^n\l (\xi _i-\bar \xi \r )^2\]
</p>

<p>
where \(\bar \xi =\frac {1}{n}\sum _{i=1}^n \xi _i\).
</p>
<div class="theorembodyremark" >

<ul style="list-style-type:none">



<a id="autoid-147"></a>

<li>

<p>
<span class="theoremheaderplain" >Remark 15.5.4</span> <a id="autoid-148" ></a >If you are familiar with statistical inference, you should recognize the maximum likelihood estimator for the variance of
the normal distribution.
</p>


</li>

</ul>

</div>

<p>
We thus obtain the estimator
</p>

<p>
\[\hat \sigma =\frac {1}{\sqrt {\epsilon }}\l (\frac {1}{n-1}\sum \limits _{i=1}^n (\xi _i-\bar \xi )^2\r )^{1/2}\]
</p>

<p>
for \(\sigma \). What we have obtained here is a estimate of what the volatility was during the time period containing \(t_1,\ldots ,t_n\), which is in the past. When we are pricing options, what we would like
to is an estimator of the volatility for future. We might be prepared to assume that the future will be similar to the past, and if we are then we can use \(\hat \sigma \). Unfortunately, in most cases historical
volatilities turn out to be a poor method of predicting future volatilities. With this in mind, we move on and examine an alternative idea.
</p>
<h6 id="autosec-184">Implied volatility and the volatility smile \((\star )\)</h6>
<a id="notes_2-autopage-184"></a>



<p>
Suppose that we wish to gauge what the (rest of the) market thinks is a reasonable estimate for volatility over the next, say, six months. Here’s one way we could do it.
</p>

<p>
Take our Black-Scholes model. Find the pricing formula for a European call option that has a date of exercise six months into the future. Let us write this price as \(c(K,t,T,r,\sigma )\). We know the value
today of the stock \(S_t\), we have argued that estimating \(r\) is not difficult, we know \(K\), and we know that \(T=\text {six months}\). We can also <i>look at the market</i> and see the price at which
this call option is being sold for – call this price \(p\). We can then solve the equation
</p>

<span class="hidden" > \(\seteqnumber{0}{15.}{5}\)</span>

<!--



                                                                p = c(K, t, T, r, σ)                                                              (15.6)                         --><a id="eq:implied_vol"></a><!--



-->

<p>


\begin{equation}
\label {eq:implied_vol} p=c(K,t,T,r,\sigma )
\end{equation}


</p>

<p>
for \(\sigma \), and obtain what is known as the <b>implied volatility</b>, often abbreviated simply to <b>vol</b>. Essentially, this is the volatility that ‘the market’ currently believes in.
</p>

<p>
This may seem like a circular procedure; if we were to then use the implied volatility as an estimator for \(\sigma \) and price accordingly, we would discover (at least, in theory) that we might as well have just
charged whatever prices we could already see in the market. However, there is more to this situation that meets the eye.
</p>

<p>
Suppose that we are wanting to price an exotic derivative that is <i>not</i> commonly traded. This means that we cannot see current market prices for it – so we could not use our exotic derivative to find the
implied volatility in the style of <span class="textup" >(<a href="Further-extensions.html#eq:implied_vol">15.6</a>)</span>. But what we can do is:
</p>
<ul style="list-style-type:none">


<li>
<p>
1. Look at prices of call options (or some other options, based on the same underlying stock, which are commonly traded) based on this derivative with the same exercise date. Use these to work out the implied
volatility.
</p>


</li>
<li>
<p>
2. Use the resulting implied volatility, in the Black-Scholes model, to compute the price that we should charge for our exotic derivative.
</p>
</li>
</ul>

<p>
In fact, <i>this</i> is currently the way in which the Black-Scholes model is most commonly used.
</p>

<p>
In another vein, we can use the idea of implied volatility to test the accuracy of the Black-Scholes model. Suppose that we observe the market prices of a number of call options, on the same stock, with the same
exercise date, but with different strike prices. We can use each of these observations to calculate a value for the implied volatility. In theory, each of these calculations should give us the same \(\sigma \).
</p>

<p>
They don’t. In practice, it is often the case that options for which \(S_t\gg K\) or \(S_t\ll K\) (at the current time \(t\)) tend to suggest higher implied volatilities that those for which \(S_t\approx K\). We
thus obtain a graph of implied volatility as a function \(K\), which typically looks like
</p>
<div class="center" >

<p>


<a href="vol.jpg" target="_blank" ><img
        src="vol.jpg"
        style="
        width:130pt;
        "
        class="inlineimage"
        alt="(image)"
></a>
</p>
</div>

<p>
This picture is known as the <b>volatility smile</b>. The exact shape of the smile varies from market to market, and can also vary substantially over time. Sometimes the smile becomes inverted, and is known as
a ‘volatility frown’.
</p>

<p>
The appearance of the volatility smile reflects deficiencies in the standard version of the Black-Scholes model. It is generally believed that the appearance of the volatility smile is closely connected to the standard
Black-Scholes model not accounting for the possibility of jumps in the stock price; investigating this issue in detail is currently an active area of mathematical finance.
</p>

<p>
Despite the existence of the volatility smile, the Black-Scholes model is used extensively, in practice. The volatility smile provides an indicator of how well/badly the Black-Scholes model is capturing reality. It’s
consequences, including what can be learned from the precise shape of the smile, are well understood by traders.
</p>

<p>
It should be noted that, in practice, decisions taken on trading stocks and shares are based both on information obtained using modelling techniques (such as Black-Scholes) as well as qualitative information (such as
reading the annual general reports of companies, being aware of the political environment, etc). Combining all this information together is a difficult task, which requires understanding the modelling theory well
enough to judge, in detail, which aspects of reality are modelled well and which are not. There is nothing special to the world of finance here – all sophisticated stochastic modelling requires this the same level of
care.
</p>
<h5 id="autosec-186">Incomplete markets \((\star )\)</h5>
<a id="notes_2-autopage-186"></a>



<a id="sec:incompleteness"></a>

<p>
In Theorem <a href="Completeness.html#thm:bs_compl">14.2.5</a> we proved that we could replicate any contingent claim \(X\) (providing that \(\E ^\Q [X]\) exists, which is not a major restriction).
Essentially, replication relies on having enough independently tradeable commodities that we can create a portfolio that fully replicates the randomness built into the contingent claim \(X\).
</p>

<p>
In some markets, the number of (independent) sources of random information is much greater than then number of (independent) commodities that are traded. They are known as <b>incomplete markets</b>. In
practice, it is not particularly easy to judge if a given market fits into this class, but very many do.
</p>

<p>
In an incomplete market we can’t hedge every contingent claim. Consequently, we also can’t deduce arbitrage free prices for every contingent claim. Instead, it is possible to construct arbitrage based arguments to
say that particular relationships exist <i>between</i> contingent claims must exist; statements of the form ‘if the price of \(X\) is this then the price of \(Y\) must be that’. Then, by observing some carefully chosen
prices from the market, we have enough information (when combined with the usual arbitrage free pricing methods) to uniquely determine the price of any contingent claim. The ‘extra’ information, that is observed
via prices, essentially involves quantifying how risk averse the market is towards particular asset classes.
</p>

<p>
We won’t go into any details on this procedure in these notes. A good source of further information is Chapter 15 of the book ‘Arbitrage Theory in Continuous Time’ by Bjork.
</p>

</section>

</div>

</div>

<footer>

<p>
Copyright Nic Freeman, Sheffield University, last updated September 15, 2021
</p>

</footer>



<nav class="botnavigation" ><a href="notes_2.html" class="linkhome" >
Home</a></nav>

</body>
</html>
