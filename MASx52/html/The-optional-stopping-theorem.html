<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta name="author" content="Nic Freeman" />
<meta name="generator" content="LaTeX Lwarp package" />
<meta name="description" content="MAS352/61023 Stochastic Processes and Financial Mathematics, Sheffield University, September 13, 2023." />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MAS352/61023 — The optional stopping theorem </title>
<link rel="stylesheet" type="text/css" href="sans-serif-lwarp-sagebrush.css" />
<script>
// Lwarp MathJax emulation code
//
// Based on code by Davide P. Cervone.
// Equation numbering: https://github.com/mathjax/MathJax/issues/2427
// Starred and ifnextchar macros: https://github.com/mathjax/MathJax/issues/2428
// \left, \right delimiters: https://github.com/mathjax/MathJax/issues/2535
//
// Modified by Brian Dunn to adjust equation numbering and add subequations.
//
// LaTeX can use \seteqnumber{subequations?}{section}{number} before each equation.
// subequations? is 0 usually, 1 if inside subequations.
// section is a string printed as-is, or empty.
// number is auto-incremented by MathJax between equations.
//
MathJax = {
  subequations: "0",
  section: "",
  loader: {
    load: ['[tex]/tagformat', '[tex]/textmacros'],
  },
  startup: {
    ready() {
      // These would be replaced by import commands if you wanted to make
      // a proper extension.
      const Configuration = MathJax._.input.tex.Configuration.Configuration;
      const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
      const Macro = MathJax._.input.tex.Symbol.Macro;
      const TexError = MathJax._.input.tex.TexError.default;
      const ParseUtil = MathJax._.input.tex.ParseUtil.default;
      const expandable = MathJax._.util.Options.expandable;

        // Insert the replacement string into the TeX string, and check
        // that there haven't been too many maxro substitutions (prevents
        // infinite loops).
        const useArgument = (parser, text) => {
          parser.string = ParseUtil.addArgs(parser, text, parser.string.slice(parser.i));
          parser.i = 0;
          if (++parser.macroCount > parser.configuration.options.maxMacros) {
            throw new TexError('MaxMacroSub1',
            'MathJax maximum macro substitution count exceeded; ' +
            'is there a recursive macro call?');
          }
        }

        // Create the command map for:
        //     \ifstar, \ifnextchar, \ifblank, \ifstrequal, \gsub, \seteqnumber
        new CommandMap('Lwarp-macros', {
          ifstar: 'IfstarFunction',
          ifnextchar: 'IfnextcharFunction',
          ifblank: 'IfblankFunction',
          ifstrequal: 'IfstrequalFunction',
          gsubstitute: 'GsubstituteFunction',
          seteqnumber: 'SeteqnumberFunction'
        }, {
          // This function implements an ifstar macro.
          IfstarFunction(parser, name) {
             const resultstar = parser.GetArgument(name);
             const resultnostar = parser.GetArgument(name);
             const star = parser.GetStar();                 // true if there is a *
             useArgument(parser, star ? resultstar : resultnostar);
          },

          // This function implements an ifnextchar macro.
          IfnextcharFunction(parser, name) {
            let whichchar = parser.GetArgument(name);
            if (whichchar.match(/^(?:0x[0-9A-F]+|[0-9]+)$/i)) {
              // $ syntax highlighting
              whichchar = String.fromCodePoint(parseInt(whichchar));
            }
            const resultnextchar = parser.GetArgument(name);
            const resultnotnextchar = parser.GetArgument(name);
            const gotchar = (parser.GetNext() === whichchar);
            useArgument(parser, gotchar ? resultnextchar : resultnotnextchar);
          },

          // This function implements an ifblank macro.
          IfblankFunction(parser, name) {
            const blankarg = parser.GetArgument(name);
            const resultblank = parser.GetArgument(name);
            const resultnotblank = parser.GetArgument(name);
            const isblank = (blankarg.trim() == "");
            useArgument(parser, isblank ? resultblank : resultnotblank);
          },

          // This function implements an ifstrequal macro.
          IfstrequalFunction(parser, name) {
            const strequalfirst = parser.GetArgument(name);
            const strequalsecond = parser.GetArgument(name);
            const resultequal = parser.GetArgument(name);
            const resultnotequal = parser.GetArgument(name);
            const isequal = (strequalfirst == strequalsecond);
            useArgument(parser, isequal ? resultequal : resultnotequal);
          },

          // This function implements a gsub macro.
          GsubstituteFunction(parser, name) {
            const gsubfirst = parser.GetArgument(name);
            const gsubsecond = parser.GetArgument(name);
            const gsubthird = parser.GetArgument(name);
            let gsubresult=gsubfirst.replace(gsubsecond, gsubthird);
            useArgument(parser, gsubresult);
          },

          // This function modifies the equation numbers.
          SeteqnumberFunction(parser, name) {
              // Get the macro parameters
              const star = parser.GetStar();                  // true if there is a *
              const optBrackets = parser.GetBrackets(name);   // contents of optional brackets
              const newsubequations = parser.GetArgument(name); // the subequations argument
              const neweqsection = parser.GetArgument(name); // the eq section argument
              const neweqnumber = parser.GetArgument(name);   // the eq number argument
              MathJax.config.subequations=newsubequations ;   // a string with boolean meaning
              MathJax.config.section=neweqsection ;           // a string with numeric meaning
              parser.tags.counter = parser.tags.allCounter = neweqnumber ;
          }

        });

        // Create the Lwarp-macros package
        Configuration.create('Lwarp-macros', {
          handler: {macro: ['Lwarp-macros']}
        });

        MathJax.startup.defaultReady();

        // For forward references:
        MathJax.startup.input[0].preFilters.add(({math}) => {
          if (math.inputData.recompile){
              MathJax.config.subequations = math.inputData.recompile.subequations;
              MathJax.config.section = math.inputData.recompile.section;
          }
        });
        MathJax.startup.input[0].postFilters.add(({math}) => {
          if (math.inputData.recompile){
              math.inputData.recompile.subequations = MathJax.config.subequations;
              math.inputData.recompile.section = MathJax.config.section;
          }
        });

          // For \left, \right with unicode-math:
          const {DelimiterMap} = MathJax._.input.tex.SymbolMap;
          const {Symbol} = MathJax._.input.tex.Symbol;
          const {MapHandler} = MathJax._.input.tex.MapHandler;
          const delimiter = MapHandler.getMap('delimiter');
          delimiter.add('\\lBrack', new Symbol('\\lBrack', '\u27E6'));
          delimiter.add('\\rBrack', new Symbol('\\rBrack', '\u27E7'));
          delimiter.add('\\lAngle', new Symbol('\\lAngle', '\u27EA'));
          delimiter.add('\\rAngle', new Symbol('\\rAngle', '\u27EB'));
          delimiter.add('\\lbrbrak', new Symbol('\\lbrbrak', '\u2772'));
          delimiter.add('\\rbrbrak', new Symbol('\\rbrbrak', '\u2773'));
          delimiter.add('\\lbag', new Symbol('\\lbag', '\u27C5'));
          delimiter.add('\\rbag', new Symbol('\\rbag', '\u27C6'));
          delimiter.add('\\llparenthesis', new Symbol('\\llparenthesis', '\u2987'));
          delimiter.add('\\rrparenthesis', new Symbol('\\rrparenthesis', '\u2988'));
          delimiter.add('\\llangle', new Symbol('\\llangle', '\u2989'));
          delimiter.add('\\rrangle', new Symbol('\\rrangle', '\u298A'));
          delimiter.add('\\Lbrbrak', new Symbol('\\Lbrbrak', '\u27EC'));
          delimiter.add('\\Rbrbrak', new Symbol('\\Rbrbrak', '\u27ED'));
          delimiter.add('\\lBrace', new Symbol('\\lBrace', '\u2983'));
          delimiter.add('\\rBrace', new Symbol('\\rBrace', '\u2984'));
          delimiter.add('\\lParen', new Symbol('\\lParen', '\u2985'));
          delimiter.add('\\rParen', new Symbol('\\rParen', '\u2986'));
          delimiter.add('\\lbrackubar', new Symbol('\\lbrackubar', '\u298B'));
          delimiter.add('\\rbrackubar', new Symbol('\\rbrackubar', '\u298C'));
          delimiter.add('\\lbrackultick', new Symbol('\\lbrackultick', '\u298D'));
          delimiter.add('\\rbracklrtick', new Symbol('\\rbracklrtick', '\u298E'));
          delimiter.add('\\lbracklltick', new Symbol('\\lbracklltick', '\u298F'));
          delimiter.add('\\rbrackurtick', new Symbol('\\rbrackurtick', '\u2990'));
          delimiter.add('\\langledot', new Symbol('\\langledot', '\u2991'));
          delimiter.add('\\rangledot', new Symbol('\\rangledot', '\u2992'));
          delimiter.add('\\lparenless', new Symbol('\\lparenless', '\u2993'));
          delimiter.add('\\rparengtr', new Symbol('\\rparengtr', '\u2994'));
          delimiter.add('\\Lparengtr', new Symbol('\\Lparengtr', '\u2995'));
          delimiter.add('\\Rparenless', new Symbol('\\Rparenless', '\u2996'));
          delimiter.add('\\lblkbrbrak', new Symbol('\\lblkbrbrak', '\u2997'));
          delimiter.add('\\rblkbrbrak', new Symbol('\\rblkbrbrak', '\u2998'));
          delimiter.add('\\lvzigzag', new Symbol('\\lvzigzag', '\u29D8'));
          delimiter.add('\\rvzigzag', new Symbol('\\rvzigzag', '\u29D9'));
          delimiter.add('\\Lvzigzag', new Symbol('\\Lvzigzag', '\u29DA'));
          delimiter.add('\\Rvzigzag', new Symbol('\\Rvzigzag', '\u29DB'));
          delimiter.add('\\lcurvyangle', new Symbol('\\lcurvyangle', '\u29FC'));
          delimiter.add('\\rcurvyangle', new Symbol('\\rcurvyangle', '\u29FD'));
          delimiter.add('\\Vvert', new Symbol('\\Vvert', '\u2980'));
    }     // ready
  },      // startup

  tex: {
    packages: {'[+]': ['tagformat', 'Lwarp-macros', 'textmacros']},
    tags: "ams",
         tagformat: {
             number: function (n) {
                 if(MathJax.config.subequations==0)
                     return(MathJax.config.section + n);
                 else
                     return(MathJax.config.section + String.fromCharCode(96+n));
             },
         },
  }
}
</script>

<script
    id="MathJax-script"
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"
></script>


</head>
<body>



<a id="notes_1-autopage-248"></a>
<nav class="topnavigation"><a href="notes_1.html" class="linkhome" >
Home</a></nav>

<header>

<p>
last updated: September 13, 2023
</p>

</header>



<div class="bodyandsidetoc">
<div class="sidetoccontainer">



<nav class="sidetoc">



<div class="sidetoctitle">

<p>
<span class="sidetocthetitle">Stochastic Processes and Financial Mathematics<br />
(part one)</span>
</p>

<p>
Contents
</p>
</div>



<div class="sidetoccontents">

<p>
<a href="notes_1.html" class="linkhome" >
Home</a>
</p>

<p>
<a href="Introduction.html#autosec-4" class="tocchapter" >
<span class="sectionnumber">0</span>&#x2003;Introduction</a>
</p>



<p>
<a href="Introduction.html#autosec-5" class="tocsection" >
<span class="sectionnumber">0.1</span>&#x2003;Organization</a>
</p>



<p>
<a href="Expectation-Arbitrage.html#autosec-12" class="tocchapter" >
<span class="sectionnumber">1</span>&#x2003;Expectation and Arbitrage</a>
</p>



<p>
<a href="Expectation-Arbitrage.html#autosec-13" class="tocsection" >
<span class="sectionnumber">1.1</span>&#x2003;Betting on coin tosses</a>
</p>



<p>
<a href="The-one-period-market.html#autosec-16" class="tocsection" >
<span class="sectionnumber">1.2</span>&#x2003;The one-period market</a>
</p>



<p>
<a href="Arbitrage.html#autosec-21" class="tocsection" >
<span class="sectionnumber">1.3</span>&#x2003;Arbitrage</a>
</p>



<p>
<a href="Modelling-discussion.html#autosec-30" class="tocsection" >
<span class="sectionnumber">1.4</span>&#x2003;Modelling discussion</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-pricing.html#autosec-32" class="tocsection" >
<span class="sectionnumber">1.5</span>&#x2003;Exercises on Chapter&nbsp;1</a>
</p>



<p>
<a href="Probability-spaces-random-variables.html#autosec-36" class="tocchapter" >
<span class="sectionnumber">2</span>&#x2003;Probability spaces and random variables</a>
</p>



<p>
<a href="Probability-spaces-random-variables.html#autosec-37" class="tocsection" >
<span class="sectionnumber">2.1</span>&#x2003;Probability measures and \(\sigma \)-fields</a>
</p>



<p>
<a href="Random-variables.html#autosec-47" class="tocsection" >
<span class="sectionnumber">2.2</span>&#x2003;Random variables</a>
</p>



<p>
<a href="Infinite.html#autosec-62" class="tocsection" >
<span class="sectionnumber">2.3</span>&#x2003;Infinite \(\Omega \)</a>
</p>



<p>
<a href="Expectation.html#autosec-68" class="tocsection" >
<span class="sectionnumber">2.4</span>&#x2003;Expectation</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-prob_meas.html#autosec-77" class="tocsection" >
<span class="sectionnumber">2.5</span>&#x2003;Exercises on Chapter 2</a>
</p>



<p>
<a href="Conditional-expectation-martingales.html#autosec-82" class="tocchapter" >
<span class="sectionnumber">3</span>&#x2003;Conditional expectation and martingales</a>
</p>



<p>
<a href="Conditional-expectation-martingales.html#autosec-83" class="tocsection" >
<span class="sectionnumber">3.1</span>&#x2003;Conditional expectation</a>
</p>



<p>
<a href="Properties-conditional-expectation.html#autosec-89" class="tocsection" >
<span class="sectionnumber">3.2</span>&#x2003;Properties of conditional expectation</a>
</p>



<p>
<a href="Martingales.html#autosec-95" class="tocsection" >
<span class="sectionnumber">3.3</span>&#x2003;Martingales</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-cond_exp.html#autosec-106" class="tocsection" >
<span class="sectionnumber">3.4</span>&#x2003;Exercises on Chapter 3</a>
</p>



<p>
<a href="Stochastic-processes.html#autosec-110" class="tocchapter" >
<span class="sectionnumber">4</span>&#x2003;Stochastic processes</a>
</p>



<p>
<a href="Stochastic-processes.html#autosec-112" class="tocsection" >
<span class="sectionnumber">4.1</span>&#x2003;Random walks</a>
</p>



<p>
<a href="Urn-processes.html#autosec-118" class="tocsection" >
<span class="sectionnumber">4.2</span>&#x2003;Urn processes</a>
</p>



<p>
<a href="A-branching-process.html#autosec-124" class="tocsection" >
<span class="sectionnumber">4.3</span>&#x2003;A branching process</a>
</p>



<p>
<a href="Other-stochastic-processes.html#autosec-128" class="tocsection" >
<span class="sectionnumber">4.4</span>&#x2003;Other stochastic processes</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-stoch_procs.html#autosec-131" class="tocsection" >
<span class="sectionnumber">4.5</span>&#x2003;Exercises on Chapter 4</a>
</p>



<p>
<a href="The-binomial-model.html#autosec-135" class="tocchapter" >
<span class="sectionnumber">5</span>&#x2003;The binomial model</a>
</p>



<p>
<a href="The-binomial-model.html#autosec-136" class="tocsection" >
<span class="sectionnumber">5.1</span>&#x2003;Arbitrage in the one-period model</a>
</p>



<p>
<a href="Hedging-in-one-period-model.html#autosec-144" class="tocsection" >
<span class="sectionnumber">5.2</span>&#x2003;Hedging in the one-period model</a>
</p>



<p>
<a href="Types-financial-derivative.html#autosec-155" class="tocsection" >
<span class="sectionnumber">5.3</span>&#x2003;Types of financial derivative</a>
</p>



<p>
<a href="The-binomial-model-definition.html#autosec-157" class="tocsection" >
<span class="sectionnumber">5.4</span>&#x2003;The binomial model (definition)</a>
</p>



<p>
<a href="Portfolios-arbitrage-martingales.html#autosec-162" class="tocsection" >
<span class="sectionnumber">5.5</span>&#x2003;Portfolios, arbitrage and martingales</a>
</p>



<p>
<a href="Hedging.html#autosec-171" class="tocsection" >
<span class="sectionnumber">5.6</span>&#x2003;Hedging</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-bin_model.html#autosec-180" class="tocsection" >
<span class="sectionnumber">5.7</span>&#x2003;Exercises on Chapter 5</a>
</p>



<p>
<a href="Convergence-random-variables.html#autosec-185" class="tocchapter" >
<span class="sectionnumber">6</span>&#x2003;Convergence of random variables</a>
</p>



<p>
<a href="Convergence-random-variables.html#autosec-186" class="tocsection" >
<span class="sectionnumber">6.1</span>&#x2003;Modes of convergence</a>
</p>



<p>
<a href="The-monotone-convergence-theorem.html#autosec-192" class="tocsection" >
<span class="sectionnumber">6.2</span>&#x2003;The monotone convergence theorem</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-rv_conv.html#autosec-196" class="tocsection" >
<span class="sectionnumber">6.3</span>&#x2003;Exercises on Chapter 6</a>
</p>



<p>
<a href="Stochastic-processes-martingale-theory.html#autosec-201" class="tocchapter" >
<span class="sectionnumber">7</span>&#x2003;Stochastic processes and martingale theory</a>
</p>



<p>
<a href="Stochastic-processes-martingale-theory.html#autosec-202" class="tocsection" >
<span class="sectionnumber">7.1</span>&#x2003;The martingale transform</a>
</p>



<p>
<a href="Roulette.html#autosec-205" class="tocsection" >
<span class="sectionnumber">7.2</span>&#x2003;Roulette</a>
</p>



<p>
<a href="The-martingale-convergence-theorem.html#autosec-211" class="tocsection" >
<span class="sectionnumber">7.3</span>&#x2003;The martingale convergence theorem</a>
</p>



<p>
<a href="Long-term-behaviour-stochastic-processes.html#autosec-219" class="tocsection" >
<span class="sectionnumber">7.4</span>&#x2003;Long term behaviour of stochastic processes</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-stoch_procs_1.html#autosec-238" class="tocsection" >
<span class="sectionnumber">7.5</span>&#x2003;Exercises on Chapter 7</a>
</p>



<p>
<a href="Further-theory-stochastic-processes.html#autosec-243" class="tocchapter" >
<span class="sectionnumber">8</span>&#x2003;Further theory of stochastic processes \((\Delta )\)</a>
</p>



<p>
<a href="Further-theory-stochastic-processes.html#autosec-244" class="tocsection" >
<span class="sectionnumber">8.1</span>&#x2003;The dominated convergence theorem \((\Delta )\)</a>
</p>



<p>
<a href="The-optional-stopping-theorem.html#autosec-249" class="tocsection" >
<span class="sectionnumber">8.2</span>&#x2003;The optional stopping theorem \((\Delta )\)</a>
</p>



<p>
<a href="The-stopped-field.html#autosec-256" class="tocsection" >
<span class="sectionnumber">8.3</span>&#x2003;The stopped \(\sigma \)-field \((\Delta )\)</a>
</p>



<p>
<a href="The-strong-Markov-property.html#autosec-260" class="tocsection" >
<span class="sectionnumber">8.4</span>&#x2003;The strong Markov property \((\Delta )\)</a>
</p>



<p>
<a href="Kolmogorov-0-1-law.html#autosec-263" class="tocsection" >
<span class="sectionnumber">8.5</span>&#x2003;Kolmogorov’s 0-1 law \((\star )\)</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-stoch_procs_2.html#autosec-267" class="tocsection" >
<span class="sectionnumber">8.6</span>&#x2003;Exercises on Chapter 8 \((\Delta )\)</a>
</p>



<p>
<a href="Simple-random-walks.html#autosec-271" class="tocchapter" >
<span class="sectionnumber">9</span>&#x2003;Simple random walks \((\Delta )\)</a>
</p>



<p>
<a href="Simple-random-walks.html#autosec-273" class="tocsection" >
<span class="sectionnumber">9.1</span>&#x2003;Exit probabilities \((\Delta )\)</a>
</p>



<p>
<a href="Stirling-Approximation.html#autosec-277" class="tocsection" >
<span class="sectionnumber">9.2</span>&#x2003;Stirling’s Approximation \((\Delta )\)</a>
</p>



<p>
<a href="Long-term-behaviour-symmetric-case.html#autosec-280" class="tocsection" >
<span class="sectionnumber">9.3</span>&#x2003;Long term behaviour: symmetric case \((\Delta )\)</a>
</p>



<p>
<a href="Long-term-behaviour-asymmetric-case.html#autosec-289" class="tocsection" >
<span class="sectionnumber">9.4</span>&#x2003;Long term behaviour: asymmetric case \((\Delta )\)</a>
</p>



<p>
<a href="In-higher-dimensions.html#autosec-295" class="tocsection" >
<span class="sectionnumber">9.5</span>&#x2003;In higher dimensions \((\star )\)</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-c-rws.html#autosec-299" class="tocsection" >
<span class="sectionnumber">9.6</span>&#x2003;Exercises on Chapter 9 \((\Delta )\)</a>
</p>



<p>
<a href="Solutions-exercises-part-one.html#autosec-303" class="tocchapter" >
<span class="sectionnumber">A</span>&#x2003;Solutions to exercises (part one)</a>
</p>



<p>
<a href="Formula-Sheet-part-one.html#autosec-305" class="tocchapter" >
<span class="sectionnumber">B</span>&#x2003;Formula Sheet (part one)</a>
</p>



</div>

</nav>

</div>



<main class="bodycontainer">



<section class="textbody">

<h1>Stochastic Processes and Financial Mathematics<br />
(part one)</h1>

<!--MathJax customizations:-->



<div class="hidden">

\(\newcommand{\footnotename}{footnote}\)

\(\def \LWRfootnote {1}\)

\(\newcommand {\footnote }[2][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\newcommand {\footnotemark }[1][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\let \LWRorighspace \hspace \)

\(\renewcommand {\hspace }{\ifstar \LWRorighspace \LWRorighspace }\)

\(\newcommand {\mathnormal }[1]{{#1}}\)

\(\newcommand \ensuremath [1]{#1}\)

\(\newcommand {\LWRframebox }[2][]{\fbox {#2}} \newcommand {\framebox }[1][]{\LWRframebox } \)

\(\newcommand {\setlength }[2]{}\)

\(\newcommand {\addtolength }[2]{}\)

\(\newcommand {\setcounter }[2]{}\)

\(\newcommand {\addtocounter }[2]{}\)

\(\newcommand {\arabic }[1]{}\)

\(\newcommand {\number }[1]{}\)

\(\newcommand {\noalign }[1]{\text {#1}\notag \\}\)

\(\newcommand {\cline }[1]{}\)

\(\newcommand {\directlua }[1]{\text {(directlua)}}\)

\(\newcommand {\luatexdirectlua }[1]{\text {(directlua)}}\)

\(\newcommand {\protect }{}\)

\(\def \LWRabsorbnumber #1 {}\)

\(\def \LWRabsorbquotenumber &quot;#1 {}\)

\(\newcommand {\LWRabsorboption }[1][]{}\)

\(\newcommand {\LWRabsorbtwooptions }[1][]{\LWRabsorboption }\)

\(\def \mathchar {\ifnextchar &quot;\LWRabsorbquotenumber \LWRabsorbnumber }\)

\(\def \mathcode #1={\mathchar }\)

\(\let \delcode \mathcode \)

\(\let \delimiter \mathchar \)

\(\def \oe {\unicode {x0153}}\)

\(\def \OE {\unicode {x0152}}\)

\(\def \ae {\unicode {x00E6}}\)

\(\def \AE {\unicode {x00C6}}\)

\(\def \aa {\unicode {x00E5}}\)

\(\def \AA {\unicode {x00C5}}\)

\(\def \o {\unicode {x00F8}}\)

\(\def \O {\unicode {x00D8}}\)

\(\def \l {\unicode {x0142}}\)

\(\def \L {\unicode {x0141}}\)

\(\def \ss {\unicode {x00DF}}\)

\(\def \SS {\unicode {x1E9E}}\)

\(\def \dag {\unicode {x2020}}\)

\(\def \ddag {\unicode {x2021}}\)

\(\def \P {\unicode {x00B6}}\)

\(\def \copyright {\unicode {x00A9}}\)

\(\def \pounds {\unicode {x00A3}}\)

\(\let \LWRref \ref \)

\(\renewcommand {\ref }{\ifstar \LWRref \LWRref }\)

\( \newcommand {\multicolumn }[3]{#3}\)

\(\require {textcomp}\)

\(\newcommand {\intertext }[1]{\text {#1}\notag \\}\)

\(\let \Hat \hat \)

\(\let \Check \check \)

\(\let \Tilde \tilde \)

\(\let \Acute \acute \)

\(\let \Grave \grave \)

\(\let \Dot \dot \)

\(\let \Ddot \ddot \)

\(\let \Breve \breve \)

\(\let \Bar \bar \)

\(\let \Vec \vec \)

\(\DeclareMathOperator {\var }{var}\)

\(\DeclareMathOperator {\cov }{cov}\)

\(\newcommand {\nN }{n \in \mathbb {N}}\)

\(\newcommand {\Br }{{\cal B}(\R )}\)

\(\newcommand {\F }{{\cal F}}\)

\(\newcommand {\ds }{\displaystyle }\)

\(\newcommand {\st }{\stackrel {d}{=}}\)

\(\newcommand {\uc }{\stackrel {uc}{\rightarrow }}\)

\(\newcommand {\la }{\langle }\)

\(\newcommand {\ra }{\rangle }\)

\(\newcommand {\li }{\liminf _{n \rightarrow \infty }}\)

\(\newcommand {\ls }{\limsup _{n \rightarrow \infty }}\)

\(\newcommand {\limn }{\lim _{n \rightarrow \infty }}\)

\(\def \ra {\Rightarrow }\)

\(\def \to {\rightarrow }\)

\(\def \iff {\Leftrightarrow }\)

\(\def \sw {\subseteq }\)

\(\def \wt {\widetilde }\)

\(\def \mc {\mathcal }\)

\(\def \mb {\mathbb }\)

\(\def \sc {\setminus }\)

\(\def \v {\textbf }\)

\(\def \p {\partial }\)

\(\def \E {\mb {E}}\)

\(\def \P {\mb {P}}\)

\(\def \R {\mb {R}}\)

\(\def \C {\mb {C}}\)

\(\def \N {\mb {N}}\)

\(\def \Q {\mb {Q}}\)

\(\def \Z {\mb {Z}}\)

\(\def \B {\mb {B}}\)

\(\def \~{\sim }\)

\(\def \-{\,;\,}\)

\(\def \|{\,|\,}\)

\(\def \qed {$\blacksquare $}\)

\(\def \1{\unicode {x1D7D9}}\)

\(\def \cadlag {c\&grave;{a}dl\&grave;{a}g}\)

\(\def \p {\partial }\)

\(\def \l {\left }\)

\(\def \r {\right }\)

\(\def \F {\mc {F}}\)

\(\def \G {\mc {G}}\)

\(\def \H {\mc {H}}\)

\(\def \Om {\Omega }\)

\(\def \om {\omega }\)

</div>

<p>
<!--
......     section The optional stopping theorem      ......
-->
<h4 id="autosec-249"><span class="sectionnumber">8.2&#x2003;</span>The optional stopping theorem \((\Delta )\)</h4>
<a id="notes_1-autopage-249"></a>
<a id="notes_1-autofile-37"></a> <a id="s:op_stop"></a>

<p>
Adaptedness, from Definition <a href="Martingales.html#d:adapted">3.3.2</a>, captures the idea that we cannot see into the future. This leaves us with the question: as time passes, in what circumstances can
we tell if an event has already occurred?
</p>
<div class="theorembodydefn">

<ul style="list-style-type:none">



<a id="autoid-178"></a>
<li>
<p>
<span class="theoremheaderplain">Definition 8.2.1</span> <a id="autoid-179" ></a >A map \(T:\Om \to \{0,1,2,\ldots ,\infty \}\) is called a \((\mc {F}_n)\) stopping time if, for all \(n\), the
event \(\{T\leq n\}\) is \(\F _n\) measurable.
</p>


</li>

</ul>

</div>

<p>
A stopping time is a random time with the property that, if we have only information from \(\mc {F}_n\) accessible to us at time \(n\), we are able to decide at any \(n\) whether or not \(T\) has already
happened. It is straightforward to check that \(T\) is a stopping time if and only if \(\{T=n\}\) is \(\mc {F}_n\) measurable for all \(n\). This is left for you as exercise <a
href="Exercises-on-Chapter-ref-c-stoch_procs_2.html#ps:stopping_time_defn_2"><b>8.4</b></a>.
</p>
<div class="theorembodyexample">

<ul style="list-style-type:none">



<a id="autoid-180"></a>
<li>
<p>
<span class="theoremheaderplain">Example 8.2.2</span> <a id="autoid-181" ></a ><a id="ex:rw_hitting_time"></a> Let \(S_n=\sum _{i=1}^nX_i\) be the simple symmetric random walk, with \(\P
[X_i=1]=\P [X_i=-1]=\frac {1}{2}\). Let \(\mc {F}_n=\sigma (X_1,\ldots ,X_n)\). Then, for any \(a\in \N \), the time
</p>

<p>
\[T=\inf \{n\geq 0\-S_n=a\},\]
</p>

<p>
which is the first time \(S_n\) takes the value \(a\), is a stopping time. It is commonly called the ‘hitting time’ of \(a\). To see that \(T\) is a stopping time we note that
</p>
<span class="hidden"> \(\seteqnumber{0}{8.}{0}\)</span>



<!--


                                                                                                                        n                  n
                                                                                                                                                 Si−1 (a)
                                                                                                                        [                  [
                                                                        {T ≤ n} = {for some i ≤ n we have Si = a} =           {Si = a} =
                                                                                                                        i=0                i=0




-->



<p>


\begin{align*}
\{T\leq n\} =\{\text {for some }i\leq n\text { we have }S_i=a\} =\bigcup _{i=0}^n\{S_i=a\} =\bigcup _{i=0}^nS_i^{-1}(a)
\end{align*}
Since \(S_i\) is \(\mc {F}_n\) measurable for all \(i\leq n\), the above equation shows that \(\{T\leq n\}\in \mc {F}_n\).
</p>


</li>

</ul>

</div>

<p>
You will have seen hitting times before – for most of you, in MAS275 in the context of Markov chains. You might also recall that the random walk \(S_n\) can be represented as Markov chains on \(\Z \). You will
probably have looked at a method for calculating expected hitting times by solving systems of linear equations. This approach is feasible if the state space of a Markov chain is finite; however \(\Z \) is infinite. In
this section we look at an alternative method, based on martingales.
</p>

<p>
Recall the notation \(\wedge \) and \(\vee \) that we introduced at the start of this chapter. That is, \(\min (s,t)=s\wedge t\) and \(\max (s,t)=s\vee t\).
</p>
<div class="theorembodylemma">

<ul style="list-style-type:none">



<a id="autoid-182"></a>
<li>
<p>
<span class="theoremheaderplain">Lemma 8.2.3</span> <a id="autoid-183" ></a ><a id="l:min_stopping_times"></a> Let \(S\) and \(T\) be stopping times with respect to the filtration \((\mc
{F}_n)\). Then \(S\wedge T\) is also a \((\mc {F}_n)\) stopping time.
</p>


</li>

</ul>

</div>

<p>
<span class="textsc">Proof:</span><span style="width:5.38533pt; display:inline-block"><!----></span> Note that
</p>

<p>
\[\{S\wedge T\leq n\}=\{S\leq n\}\cup \{T\leq n\}.\]
</p>

<p>
Since \(S\) and \(T\) are stopping times, both the sets on the right hand side of the above are events in the \(\sigma \)-field \(\mc {F}_n\). Hence, the event on the left hand side is also in \(\mc {F}_n\).
&#x2003;&#x2003;&#x220E;
</p>

<p>
If \(T\) is a stopping time and \(M\) is a stochastic process, we define \(M^T\) to be the process
</p>

<p>
\[M^T_n=M_{n\wedge T}.\]
</p>

<p>
Here \(a\wedge b\) denotes the minimum of \(a\) and \(b\). To be precise, this means that \(M^T_n(\omega )=M_{n\wedge T(\omega )}(\omega )\) for all \(\omega \in \Omega \). In Example <a
href="The-optional-stopping-theorem.html#ex:rw_hitting_time">8.2.2</a>, \(S^T\) would be the random walk \(S\) which is stopped (i.e.&nbsp;never moves again) when (if!) it reaches state \(a\).
</p>
<div class="theorembodylemma">

<ul style="list-style-type:none">



<a id="autoid-184"></a>
<li>
<p>
<span class="theoremheaderplain">Lemma 8.2.4</span> <a id="autoid-185" ></a ><a id="l:stopped_martingale"></a> Let \(M_n\) be a martingale (resp.&nbsp;supmartingale, supermartingale) and let
\(T\) be a stopping time. Then \(M^T\) is also a martingale (resp.&nbsp;supmartingale, supermartingale).
</p>


</li>

</ul>

</div>

<p>
<span class="textsc">Proof:</span><span style="width:5.38533pt; display:inline-block"><!----></span> Let \(C_n:=\1\{T-1\ge n\}\). Note that \(\{T-1\ge n\}=\Omega \sc \{T\le n-1\}\),
so \(\{T\ge n\}\in \mc {F}_{n}\). By Lemma <a href="Expectation.html#l:indicator_meas">2.4.2</a> \(C_n\in m\mc {F}_{n-1}\). That is, \((C_n)\) is an adapted process. Moreover,
</p>

<p>
\[ (C\circ M)_n = \sum _{k=1}^n \1_{k-1\le T-1} (M_k-M_{k-1}) = \sum _{k=1}^n \1_{k\le T} (M_k-M_{k-1}) = \sum _{k=1}^{n\wedge T} (M_k-M_{k-1}) = M_{T\wedge n}-M_{0}.                \]
</p>

<p>
The last equality holds because the sum is telescoping (i.e.&nbsp;the middle terms all cancel each other out). Hence, by Theorem&nbsp;<a
href="Stochastic-processes-martingale-theory.html#t:mart_transf">7.1.1</a>, if \(M\) is a martingale (resp.&nbsp;submartingale, supermartingale), \(C\circ M\) is also a martingale
(resp.&nbsp;submartingale, supermartingale). &#x2003;&#x2003;&#x220E;
</p>
<div class="theorembodythm">

<ul style="list-style-type:none">



<a id="autoid-186"></a>
<li>
<p>
<span class="theoremheaderplain">Theorem 8.2.5 (Doob’s Optional Stopping Theorem)</span> <a id="autoid-187" ></a >Let \(M\) be martingale (resp.&nbsp;submartingale, supermartingale) and let \(T\)
be a stopping time. Then
</p>

<p>
\[\E [M_T]=\E [M_0]\]
</p>

<p>
(resp.&nbsp;\(\geq \), \(\leq \)) if any one of the following conditions hold:
</p>
<ul style="list-style-type:none">


<li>
<p>
(a) \(T\) is bounded.
</p>


</li>
<li>


<p>
(b) \(\P [T&lt;\infty ]=1\) and there exists \(c\in \R \) such that \(|M_n|\leq c\) for all \(n\).
</p>


</li>
<li>


<p>
(c) \(\E [T]&lt;\infty \) and there exists \(c\in \R \) such that \(|M_n-M_{n-1}|\leq c\) for all \(n\).
</p>
</li>
</ul>


</li>

</ul>

</div>

<p>
<span class="textsc">Proof:</span><span style="width:5.38533pt; display:inline-block"><!----></span> We’ll prove this for the supermartingale case. The submartingale case then follows by
considering \(-M\), and the martingale case follows since martingales are both supermartingales and submartingales.
</p>

<p>
Note that
</p>

<span class="hidden"> \(\seteqnumber{0}{8.}{0}\)</span>

<!--



                                      E[Mn∧T − M0 ] ≤ 0,                                      (8.1)                                                              --><a id="eq:opt_stop_pre"></a><!--

-->

<p>


\begin{equation}
\label {eq:opt_stop_pre} \E [M_{n\wedge T}-M_0]\le 0,
\end{equation}


</p>

<p>
because \(M^T\) is a supermartingale, by Lemma <a href="The-optional-stopping-theorem.html#l:stopped_martingale">8.2.4</a>. For (a), we take \(n=\sup _\omega T(\omega )\) and the conclusion
follows.
</p>

<p>
For (b), we use the dominated convergence theorem to let \(n\to \infty \) in <span class="textup">(<a href="The-optional-stopping-theorem.html#eq:opt_stop_pre">8.1</a>)</span>. As \(n\to
\infty \), almost surely \(n\wedge T(\omega )\) is eventually equal to \(T(\omega )\) (because \(\P [T&lt;\infty ]=1\)), so \(M_{n\wedge T}\to M_T\) almost surely. Since \(M\) is bounded, \(M_{n\wedge
T}\) and \(M_T\) are also bounded. So \(\E [M_{n\wedge T}]\to \E [M_T]\) and taking limits in <span class="textup">(<a
href="The-optional-stopping-theorem.html#eq:opt_stop_pre">8.1</a>)</span> obtains \(\E [M_T-M_0]\leq 0\), which in turn implies that \(\E [M_T]\leq \E [M_0]\).
</p>

<p>
For (c), we will also use the dominated convergence theorem to let \(n\to \infty \) in <span class="textup">(<a href="The-optional-stopping-theorem.html#eq:opt_stop_pre">8.1</a>)</span>, but now
we need a different way to check its conditions. We observe that
</p>

<p>
\[ |M_{n\wedge T}-M_0| =\left |\sum _{k=1}^{n\wedge T} (M_k-M_{k-1}) \right | \le T\;\sup _{n\in \N } |M_n-M_{n-1}|.               \]
</p>

<p>
Since \(\E [T(\sup _n |M_n-M_{n-1}|)]\leq c\E [T]&lt;\infty \), we can use the Dominated Convergence Theorem to let \(n\to \infty \), and the results follows as in (b). &#x2003;&#x2003;&#x220E;
</p>

<p>
These three sets of conditions (a)-(c) for the optional stopping theorem are listed on the formula sheet, in Appendix <a href="Formula-Sheet-part-one.html#s:formula_sheet_1">B</a>. Sometimes
<i>none</i> of them apply! See Remark <a href="Long-term-behaviour-symmetric-case.html#r:op_stop_careful">9.3.5</a> and the lemma above it for a warning example.
</p>

</section>

</main>

</div>

<footer>

<p>
Copyright Nic Freeman, Sheffield University, last updated September 13, 2023
</p>

</footer>



<nav class="botnavigation"><a href="notes_1.html" class="linkhome" >
Home</a></nav>

</body>
</html>
