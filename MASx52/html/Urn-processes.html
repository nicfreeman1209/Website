<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta name="author" content="Nic Freeman" />
<meta name="generator" content="LaTeX Lwarp package" />
<meta name="description" content="MAS352/452/6052 Stochastic Processes and Financial Mathematics, Sheffield University, January 24, 2022." />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<title>MASx52 — Urn processes</title>
<link rel="stylesheet" type="text/css" href="sans-serif-lwarp-sagebrush.css" />


<script>
// Lwarp MathJax emulation code
//
// Based on code by Davide P. Cervone.
// Equation numbering: https://github.com/mathjax/MathJax/issues/2427
// Starred and ifnextchar macros: https://github.com/mathjax/MathJax/issues/2428
//
// Modified by Brian Dunn to adjust equation numbering and add subequations.
//
// LaTeX can use \seteqnumber{subequations?}{section}{number} before each equation.
// subequations? is 0 usually, 1 if inside subequations.
// section is a string printed as-is, or empty.
// number is auto-incremented by MathJax between equations.
//
MathJax = {
     subequations: "0",
     section: "",
     loader: {
         load: ['[tex]/tagFormat'],
     },
     startup: {
         ready() {
             //       These would be replaced by import commands if you wanted to make
             //       a proper extension.
             const Configuration = MathJax._.input.tex.Configuration.Configuration;
             const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
             const Macro = MathJax._.input.tex.Symbol.Macro;
             const TexError = MathJax._.input.tex.TexError.default;
             const ParseUtil = MathJax._.input.tex.ParseUtil.default;
             const expandable = MathJax._.util.Options.expandable;


             //       Insert the replacement string into the TeX string, and check
             //       that there haven't been too many maxro substitutions (prevents
             //       infinite loops).
             const useArgument = (parser, text) => {
                  parser.string = ParseUtil.addArgs(parser, text, parser.string.slice(parser.i));
                  parser.i = 0;
                  if (++parser.macroCount > parser.configuration.options.maxMacros) {
                      throw new TexError('MaxMacroSub1',
                      'MathJax maximum macro substitution count exceeded; ' +
                      'is there a recursive macro call?');
                  }
             }


             //       Create the command map for \ifstar, \ifnextchar, \seteqnumber
             new CommandMap('ifstar-ifnextchar-setequnumber', {
                  ifstar: 'IfstarFunction',
                  ifnextchar: 'IfnextcharFunction',
                  seteqnumber: 'SeteqnumberFunction'
             }, {
                  //      This function implements an ifstar macro.
                  IfstarFunction(parser, name) {
                      const resultstar = parser.GetArgument(name);
                      const resultnostar = parser.GetArgument(name);
                      const star = parser.GetStar();                        // true if there is a *
                      useArgument(parser, star ? resultstar : resultnostar);
                  },


                  //      This function implements an ifnextchar macro.
                  IfnextcharFunction(parser, name) {
                      let whichchar = parser.GetArgument(name);
                      if (whichchar.match(/^(?:0x[0-9A-F]+|[0-9]+)$/i)) {
                          // $ syntax highlighting
                          whichchar = String.fromCodePoint(parseInt(whichchar));
                      }
                      const resultnextchar = parser.GetArgument(name);
                      const resultnotnextchar = parser.GetArgument(name);
                      const gotchar = (parser.GetNext() === whichchar);
                      useArgument(parser, gotchar ? resultnextchar : resultnotnextchar);
                  },


                  //      This function modifies the equation numbers.
                  SeteqnumberFunction(parser, name) {
                          //   Get the macro parameters
                          const star = parser.GetStar();                       // true if there is a *
                          const optBrackets = parser.GetBrackets(name);        // contents of optional brackets
                          const newsubequations = parser.GetArgument(name);       // the subequations argument
                          const neweqsection = parser.GetArgument(name);       // the eq section argument
                          const neweqnumber = parser.GetArgument(name);        // the eq number argument
                          MathJax.config.subequations=newsubequations ;        // a string with boolean meaning
                          MathJax.config.section=neweqsection ;                // a string with numeric meaning
                          parser.tags.counter = parser.tags.allCounter = neweqnumber ;
                  }
             });


             //       Create the ifstar-ifnextchar-setequnumber package
             Configuration.create('ifstar-ifnextchar-setequnumber', {
                  handler: {macro: ['ifstar-ifnextchar-setequnumber']}
             });


             MathJax.startup.defaultReady();


             // For forward references:
             MathJax.startup.input[0].preFilters.add(({math}) => {
                  if (math.inputData.recompile){
                          MathJax.config.subequations = math.inputData.recompile.subequations;
                          MathJax.config.section = math.inputData.recompile.section;
                  }
             });
             MathJax.startup.input[0].postFilters.add(({math}) => {
                  if (math.inputData.recompile){
                          math.inputData.recompile.subequations = MathJax.config.subequations;
                          math.inputData.recompile.section = MathJax.config.section;
                  }
             });
         }       // ready
     },           // startup


     tex: {
         packages: {'[+]': ['tagFormat', 'ifstar-ifnextchar-setequnumber']},
         tags: "ams",
                  tagFormat: {
                          number: function (n) {
                               if(MathJax.config.subequations==0)
                                      return(MathJax.config.section + n);
                               else
                                      return(MathJax.config.section + String.fromCharCode(96+n));
                          },
                  },
     }
}
</script>


<script
         id="MathJax-script"
         src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"
></script>


</head>
<body>



<a id="notes_1-autopage-116"></a>
<nav class="topnavigation" ><a href="notes_1.html" class="linkhome" >
Home</a></nav>

<header>

<p>
last updated: January 24, 2022
</p>

</header>



<div class="bodyandsidetoc" >
<div class="sidetoccontainer" >



<nav class="sidetoc" >



<div class="sidetoctitle" >

<p>
<span class="sidetocthetitle" >Stochastic Processes and Financial Mathematics<br />
(part one)</span>
</p>

<p>
Contents
</p>
</div>



<div class="sidetoccontents" >

<p>
<a href="notes_1.html" class="linkhome" >
Home</a>
</p>

<p>
<a href="Introduction.html#autosec-4" class="tocchapter" >
<span class="sectionnumber" >0</span>&#x2003;Introduction</a>
</p>



<p>
<a href="Introduction.html#autosec-5" class="tocsection" >
<span class="sectionnumber" >0.1</span>&#x2003;Organization</a>
</p>



<p>
<a href="Expectation-Arbitrage.html#autosec-12" class="tocchapter" >
<span class="sectionnumber" >1</span>&#x2003;Expectation and Arbitrage</a>
</p>



<p>
<a href="Expectation-Arbitrage.html#autosec-13" class="tocsection" >
<span class="sectionnumber" >1.1</span>&#x2003;Betting on coin tosses</a>
</p>



<p>
<a href="The-one-period-market.html#autosec-16" class="tocsection" >
<span class="sectionnumber" >1.2</span>&#x2003;The one-period market</a>
</p>



<p>
<a href="Arbitrage.html#autosec-21" class="tocsection" >
<span class="sectionnumber" >1.3</span>&#x2003;Arbitrage</a>
</p>



<p>
<a href="Modelling-discussion.html#autosec-31" class="tocsection" >
<span class="sectionnumber" >1.4</span>&#x2003;Modelling discussion</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-pricing.html#autosec-33" class="tocsection" >
<span class="sectionnumber" >1.5</span>&#x2003;Exercises on Chapter&nbsp;<a href="Expectation-Arbitrage.html#chap:pricing">1</a></a>
</p>



<p>
<a href="Probability-spaces-random-variables.html#autosec-37" class="tocchapter" >
<span class="sectionnumber" >2</span>&#x2003;Probability spaces and random variables</a>
</p>



<p>
<a href="Probability-spaces-random-variables.html#autosec-38" class="tocsection" >
<span class="sectionnumber" >2.1</span>&#x2003;Probability measures and \(\sigma \)-fields</a>
</p>



<p>
<a href="Random-variables.html#autosec-48" class="tocsection" >
<span class="sectionnumber" >2.2</span>&#x2003;Random variables</a>
</p>



<p>
<a href="Infinite.html#autosec-62" class="tocsection" >
<span class="sectionnumber" >2.3</span>&#x2003;Infinite \(\Omega \)</a>
</p>



<p>
<a href="Expectation.html#autosec-68" class="tocsection" >
<span class="sectionnumber" >2.4</span>&#x2003;Expectation</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-prob_meas.html#autosec-76" class="tocsection" >
<span class="sectionnumber" >2.5</span>&#x2003;Exercises on Chapter <a href="Probability-spaces-random-variables.html#chap:prob_meas">2</a></a>
</p>



<p>
<a href="Conditional-expectation-martingales.html#autosec-81" class="tocchapter" >
<span class="sectionnumber" >3</span>&#x2003;Conditional expectation and martingales</a>
</p>



<p>
<a href="Conditional-expectation-martingales.html#autosec-82" class="tocsection" >
<span class="sectionnumber" >3.1</span>&#x2003;Conditional expectation</a>
</p>



<p>
<a href="Properties-conditional-expectation.html#autosec-88" class="tocsection" >
<span class="sectionnumber" >3.2</span>&#x2003;Properties of conditional expectation</a>
</p>



<p>
<a href="Martingales.html#autosec-94" class="tocsection" >
<span class="sectionnumber" >3.3</span>&#x2003;Martingales</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-cond_exp.html#autosec-105" class="tocsection" >
<span class="sectionnumber" >3.4</span>&#x2003;Exercises on Chapter <a href="Conditional-expectation-martingales.html#chap:cond_exp">3</a></a>
</p>



<p>
<a href="Stochastic-processes.html#autosec-109" class="tocchapter" >
<span class="sectionnumber" >4</span>&#x2003;Stochastic processes</a>
</p>



<p>
<a href="Stochastic-processes.html#autosec-111" class="tocsection" >
<span class="sectionnumber" >4.1</span>&#x2003;Random walks</a>
</p>



<p>
<a href="Urn-processes.html#autosec-117" class="tocsection" >
<span class="sectionnumber" >4.2</span>&#x2003;Urn processes</a>
</p>



<p>
<a href="A-branching-process.html#autosec-122" class="tocsection" >
<span class="sectionnumber" >4.3</span>&#x2003;A branching process</a>
</p>



<p>
<a href="Other-stochastic-processes.html#autosec-126" class="tocsection" >
<span class="sectionnumber" >4.4</span>&#x2003;Other stochastic processes</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-stoch_procs.html#autosec-129" class="tocsection" >
<span class="sectionnumber" >4.5</span>&#x2003;Exercises on Chapter <a href="Stochastic-processes.html#chap:stoch_procs">4</a></a>
</p>



<p>
<a href="The-binomial-model.html#autosec-133" class="tocchapter" >
<span class="sectionnumber" >5</span>&#x2003;The binomial model</a>
</p>



<p>
<a href="The-binomial-model.html#autosec-134" class="tocsection" >
<span class="sectionnumber" >5.1</span>&#x2003;Arbitrage in the one-period model</a>
</p>



<p>
<a href="Hedging-in-one-period-model.html#autosec-142" class="tocsection" >
<span class="sectionnumber" >5.2</span>&#x2003;Hedging in the one-period model</a>
</p>



<p>
<a href="Types-financial-derivative.html#autosec-153" class="tocsection" >
<span class="sectionnumber" >5.3</span>&#x2003;Types of financial derivative</a>
</p>



<p>
<a href="The-binomial-model-definition.html#autosec-155" class="tocsection" >
<span class="sectionnumber" >5.4</span>&#x2003;The binomial model (definition)</a>
</p>



<p>
<a href="Portfolios-arbitrage-martingales.html#autosec-159" class="tocsection" >
<span class="sectionnumber" >5.5</span>&#x2003;Portfolios, arbitrage and martingales</a>
</p>



<p>
<a href="Hedging.html#autosec-168" class="tocsection" >
<span class="sectionnumber" >5.6</span>&#x2003;Hedging</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-bin_model.html#autosec-177" class="tocsection" >
<span class="sectionnumber" >5.7</span>&#x2003;Exercises on Chapter <a href="The-binomial-model.html#chap:bin_model">5</a></a>
</p>



<p>
<a href="Convergence-random-variables.html#autosec-182" class="tocchapter" >
<span class="sectionnumber" >6</span>&#x2003;Convergence of random variables</a>
</p>



<p>
<a href="Convergence-random-variables.html#autosec-183" class="tocsection" >
<span class="sectionnumber" >6.1</span>&#x2003;Modes of convergence</a>
</p>



<p>
<a href="The-monotone-convergence-theorem.html#autosec-189" class="tocsection" >
<span class="sectionnumber" >6.2</span>&#x2003;The monotone convergence theorem</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-rv_conv.html#autosec-194" class="tocsection" >
<span class="sectionnumber" >6.3</span>&#x2003;Exercises on Chapter <a href="Convergence-random-variables.html#chap:rv_conv">6</a></a>
</p>



<p>
<a href="Stochastic-processes-martingale-theory.html#autosec-199" class="tocchapter" >
<span class="sectionnumber" >7</span>&#x2003;Stochastic processes and martingale theory</a>
</p>



<p>
<a href="Stochastic-processes-martingale-theory.html#autosec-200" class="tocsection" >
<span class="sectionnumber" >7.1</span>&#x2003;The martingale transform</a>
</p>



<p>
<a href="Roulette.html#autosec-203" class="tocsection" >
<span class="sectionnumber" >7.2</span>&#x2003;Roulette</a>
</p>



<p>
<a href="The-martingale-convergence-theorem.html#autosec-209" class="tocsection" >
<span class="sectionnumber" >7.3</span>&#x2003;The martingale convergence theorem</a>
</p>



<p>
<a href="Long-term-behaviour-stochastic-processes.html#autosec-217" class="tocsection" >
<span class="sectionnumber" >7.4</span>&#x2003;Long term behaviour of stochastic processes</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-stoch_procs_1.html#autosec-236" class="tocsection" >
<span class="sectionnumber" >7.5</span>&#x2003;Exercises on Chapter <a href="Stochastic-processes-martingale-theory.html#chap:stoch_procs_1">7</a></a>
</p>



<p>
<a href="Further-theory-stochastic-processes.html#autosec-241" class="tocchapter" >
<span class="sectionnumber" >8</span>&#x2003;Further theory of stochastic processes \((\Delta )\)</a>
</p>



<p>
<a href="Further-theory-stochastic-processes.html#autosec-242" class="tocsection" >
<span class="sectionnumber" >8.1</span>&#x2003;The dominated convergence theorem \((\Delta )\)</a>
</p>



<p>
<a href="The-optional-stopping-theorem.html#autosec-247" class="tocsection" >
<span class="sectionnumber" >8.2</span>&#x2003;The optional stopping theorem \((\Delta )\)</a>
</p>



<p>
<a href="Hitting-probabilities-random-walks.html#autosec-254" class="tocsection" >
<span class="sectionnumber" >8.3</span>&#x2003;Hitting probabilities of random walks \((\Delta )\)</a>
</p>



<p>
<a href="Exercises-on-Chapter-ref-chap-stoch_procs_2.html#autosec-261" class="tocsection" >
<span class="sectionnumber" >8.4</span>&#x2003;Exercises on Chapter <a href="Further-theory-stochastic-processes.html#chap:stoch_procs_2">8</a> \((\Delta )\)</a>
</p>



<p>
<a href="Solutions-exercises-part-one.html#autosec-265" class="tocchapter" >
<span class="sectionnumber" >A</span>&#x2003;Solutions to exercises (part one)</a>
</p>



<p>
<a href="Formula-Sheet-part-one.html#autosec-282" class="tocchapter" >
<span class="sectionnumber" >B</span>&#x2003;Formula Sheet (part one)</a>
</p>



</div>

</nav>

</div>



<div class="bodycontainer" >



<section class="textbody" >

<h1>Stochastic Processes and Financial Mathematics<br />
(part one)</h1>

<!--MathJax customizations:-->



<div class="hidden" >

\(\newcommand{\footnotename}{footnote}\)

\(\def \LWRfootnote {1}\)

\(\newcommand {\footnote }[2][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\newcommand {\footnotemark }[1][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\newcommand \ensuremath [1]{#1}\)

\(\newcommand {\LWRframebox }[2][]{\fbox {#2}} \newcommand {\framebox }[1][]{\LWRframebox } \)

\(\newcommand {\setlength }[2]{}\)

\(\newcommand {\addtolength }[2]{}\)

\(\newcommand {\setcounter }[2]{}\)

\(\newcommand {\addtocounter }[2]{}\)

\(\newcommand {\cline }[1]{}\)

\(\newcommand {\directlua }[1]{\text {(directlua)}}\)

\(\newcommand {\luatexdirectlua }[1]{\text {(directlua)}}\)

\(\newcommand {\protect }{}\)

\(\def \LWRabsorbnumber #1 {}\)

\(\def \LWRabsorbquotenumber &quot;#1 {}\)

\(\def \mathchar {\ifnextchar &quot;\LWRabsorbquotenumber \LWRabsorbnumber }\)

\(\def \mathcode #1={\mathchar }\)

\(\let \delcode \mathcode \)

\(\let \delimiter \mathchar \)

\(\let \LWRref \ref \)

\(\renewcommand {\ref }{\ifstar \LWRref \LWRref }\)

\(\newcommand {\intertext }[1]{\text {#1}\notag \\}\)

\(\DeclareMathOperator {\var }{var}\)

\(\DeclareMathOperator {\cov }{cov}\)

\(\newcommand {\nN }{n \in \mathbb {N}}\)

\(\newcommand {\Br }{{\cal B}(\R )}\)

\(\newcommand {\F }{{\cal F}}\)

\(\newcommand {\ds }{\displaystyle }\)

\(\newcommand {\st }{\stackrel {d}{=}}\)

\(\newcommand {\uc }{\stackrel {uc}{\rightarrow }}\)

\(\newcommand {\la }{\langle }\)

\(\newcommand {\ra }{\rangle }\)

\(\newcommand {\li }{\liminf _{n \rightarrow \infty }}\)

\(\newcommand {\ls }{\limsup _{n \rightarrow \infty }}\)

\(\newcommand {\limn }{\lim _{n \rightarrow \infty }}\)

\(\def \ra {\Rightarrow }\)

\(\def \to {\rightarrow }\)

\(\def \iff {\Leftrightarrow }\)

\(\def \sw {\subseteq }\)

\(\def \wt {\widetilde }\)

\(\def \mc {\mathcal }\)

\(\def \mb {\mathbb }\)

\(\def \sc {\setminus }\)

\(\def \v {\textbf }\)

\(\def \p {\partial }\)

\(\def \E {\mb {E}}\)

\(\def \P {\mb {P}}\)

\(\def \R {\mb {R}}\)

\(\def \C {\mb {C}}\)

\(\def \N {\mb {N}}\)

\(\def \Q {\mb {Q}}\)

\(\def \Z {\mb {Z}}\)

\(\def \B {\mb {B}}\)

\(\def \~{\sim }\)

\(\def \-{\,;\,}\)

\(\def \|{\,|\,}\)

\(\def \qed {$\blacksquare $}\)

\(\def \1{\unicode {x1D7D9}}\)

\(\def \cadlag {c\‘{a}dl\‘{a}g}\)

\(\def \p {\partial }\)

\(\def \l {\left }\)

\(\def \r {\right }\)

\(\def \F {\mc {F}}\)

\(\def \G {\mc {G}}\)

\(\def \H {\mc {H}}\)

\(\def \Om {\Omega }\)

\(\def \om {\omega }\)

</div>

<p>
<h4 id="autosec-117"><span class="sectionnumber" >4.2&#x2003;</span>Urn processes</h4>
<a id="notes_1-autopage-117"></a>
<a id="notes_1-autofile-17"></a> <a id="sec:urn"></a>

<p>
Urn processes are ‘balls in bags’ processes. In the simplest kind of urn process, which we look at in this section, we have just a single urn (i.e.&nbsp;bag) that contains balls of two different colours.
</p>

<p>
At time \(0\), an urn contains \(1\) black ball and \(1\) red ball. Then, for each \(n=1,2,\ldots ,\) we generate the state of the urn at time \(n\) by doing the following:
</p>
<ul style="list-style-type:none">


<li>
<p>
1. Draw a ball from the urn, look at its colour, and return this ball to the urn.
</p>


</li>
<li>
<p>
2. Add a new ball of the same colour as the drawn ball.
</p>
</li>
</ul>

<p>
So, at time \(n\) (which means: after the \(n^{th}\) iteration of the above steps is completed) there are \(n+2\) balls in the urn. This process is known as the <i>Po&#x0301;lya</i> urn.
</p>

<p>
Let \(B_n\) be the number of red balls in the urn at time \(n\), and note that \(B_0=1\). Set \((\mc {F}_n)\) to be the filtration generated by \((B_n)\).
</p>

<p>
Our first step is to note that \(B_n\) itself is <i>not</i> a martingale. The reason is that over time we will put more and more red balls into the urn, so the number of red balls drifts upwards over time. Formally,
we can note that
</p>
<span class="hidden" > \(\seteqnumber{0}{4.}{3}\)</span>



<!--



                                                                    E[Bn+1 | Fn ] = E[Bn+1 1{(n+1)th draw is red} | Fn ] + E[Bn+1 1{(n+1)th draw is black} | Fn ]

                                                                                    = E[(Bn + 1)1{(n+1)th draw is red} | Fn ] + E[Bn 1{(n+1)th draw is black} | Fn ]

                                                                                    = (Bn + 1)E[1{(n+1)th draw is red} | Fn ] + Bn E[1{(n+1)th draw is black} | Fn ]
                                                                                               Bn            Bn
                                                                                                                           
                                                                                    = (Bn + 1)     + Bn 1 −
                                                                                              n+2           n+2
                                                                                     Bn (n + 3)
                                                                                    = (4.4)     > Bn .                                                                         --><a id="eq:urn_Bn_submart"></a><!--
                                                                                       n+2



-->



<p>


\begin{align}
\E [B_{n+1}\|\mc {F}_n] &amp;=\E [B_{n+1}\1_{\{(n+1)^{th}\text { draw is red}\}}\|\mc {F}_n] +\E [B_{n+1}\1_{\{(n+1)^{th}\text { draw is black}\}}\|\mc {F}_n]\notag \\ &amp;=\E
[(B_n+1)\1_{\{(n+1)^{th}\text { draw is red}\}}\|\mc {F}_n] +\E [B_n\1_{\{(n+1)^{th}\text { draw is black}\}}\|\mc {F}_n]\notag \\ &amp;=(B_n+1)\E [\1_{\{(n+1)^{th}\text { draw
is red}\}}\|\mc {F}_n] +B_n\E [\1_{\{(n+1)^{th}\text { draw is black}\}}\|\mc {F}_n]\notag \\ &amp;=(B_n+1)\frac {B_n}{n+2}+B_n\l (1-\frac {B_n}{n+2}\r )\notag \\ &amp;=\frac
{B_n(n+3)}{n+2}&gt;B_n.\label {eq:urn_Bn_submart}
\end{align}
We do have \(B_n\in m\mc {F}_n\) and since \(1\leq B_n\leq n+2\) we also have \(B_n\in L^1\), so \(B_n\) is a submartingale, but due to <span class="textup" >(<a
href="Urn-processes.html#eq:urn_Bn_submart">4.4</a>)</span> \(B_n\) is not a martingale.
</p>

<p>
However, a closely related quantity is a martingale. Let
</p>

<p>
\[M_n=\frac {B_n}{n+2}.\]
</p>

<p>
Then \(M_n\) is the proportion of balls in the urn that are red, at time \(n\). Note that \(M_n\in [0,1]\). We can think of the extra factor \(n+2\), which increases over time, as an attempt to cancel out the
upwards drift of \(B_n\). We now have:
</p>
<span class="hidden" > \(\seteqnumber{0}{4.}{4}\)</span>



<!--



                                                                 E[Mn+1 | Fn ] = E Mn+1 1{(n+1)th draw is red} Fn + E Mn+1 1{(n+1)th draw is black} Fn
                                                                                      h                                 i       h                                 i


                                                                                     Bn + 1                                 Bn
                                                                                                                                                                    
                                                                                =E          1{(n+1)th draw is red} Fn + E       1      th               Fn
                                                                                      n+3                                  n + 3 {(n+1) draw is black}
                                                                                  Bn + 1 h                               Bn
                                                                                          E 1{(n+1)th draw is red} Fn +      E 1{(n+1)th draw is black} Fn
                                                                                                                     i        h                            i
                                                                                =
                                                                                   n+3                                  n+3
                                                                                  Bn + 1 Bn        Bn             Bn
                                                                                                                     
                                                                                =              +           1−
                                                                                   n+3 n+2 n+3                   n+2
                                                                                     Bn2 + Bn       (n + 2)Bn − Bn2
                                                                                =                +
                                                                                  (n + 2)(n + 3)     (n + 2)(n + 3)
                                                                                    (n + 3)Bn
                                                                                =
                                                                                  (n + 2)(n + 3)
                                                                                   Bn
                                                                                =
                                                                                  n+2
                                                                                = Mn .



-->



<p>


\begin{align*}
\E [M_{n+1}\|\mc {F}_n] &amp;=\E \l [M_{n+1}\1_{\{(n+1)^{th}\text { draw is red}\}}\,\Big |\,\mc {F}_n\r ] +\E \l [M_{n+1}\1_{\{(n+1)^{th}\text { draw is black}\}}\,\Big |\,\mc
{F}_n\r ]\\ &amp;=\E \l [\frac {B_n+1}{n+3}\,\1_{\{(n+1)^{th}\text { draw is red}\}}\,\Big |\,\mc {F}_n\r ] +\E \l [\frac {B_n}{n+3}\,\1_{\{(n+1)^{th}\text { draw is
black}\}}\,\Big |\,\mc {F}_n\r ]\\ &amp;=\frac {B_n+1}{n+3}\E \l [\1_{\{(n+1)^{th}\text { draw is red}\}}\,\Big |\,\mc {F}_n\r ] +\frac {B_n}{n+3}\E \l [\,\1_{\{(n+1)^{th}\text {
draw is black}\}}\,\Big |\,\mc {F}_n\r ]\\ &amp;=\frac {B_n+1}{n+3}\frac {B_n}{n+2}+\frac {B_n}{n+3}\l (1-\frac {B_n}{n+2}\r )\\ &amp;=\frac {B_n^2+B_n}{(n+2)(n+3)}+\frac
{(n+2)B_n-B_n^2}{(n+2)(n+3)}\\ &amp;=\frac {(n+3)B_n}{(n+2)(n+3)}\\ &amp;=\frac {B_n}{n+2}\\ &amp;=M_n.
\end{align*}
We have \(M_n\in m\mc {F}_n\) and since \(M_n\in [0,1]\) we have that \(M_n\in L^1\). Hence \((M_n)\) is a martingale.
</p>

<p>
We can think of \(M_n=\frac {B_n}{n+2}\) as a compensation mechanism; \(B_n\) tends to increase, and we compensate for this increase by dividing by \(n+2\).
</p>
<div class="theorembodyremark" >

<ul style="list-style-type:none">



<a id="autoid-82"></a>

<li>

<p>
<span class="theoremheaderplain" >Remark 4.2.1</span> <a id="autoid-83" ></a >The calculation of \(\E [M_{n+1}\|\mc {F}_n]\) is written out in full as a second example of the method. In fact, we
could simply have divided the equality in <span class="textup" >(<a href="Urn-processes.html#eq:urn_Bn_submart">4.4</a>)</span> by \(n+3\), and obtained \(\E [M_{n+1}\|\mc {F}_n]=M_n\).
</p>


</li>

</ul>

</div>
<h5 id="autosec-119">On fairness</h5>
<a id="notes_1-autopage-119"></a>



<p>
It is clear that the symmetric random walk is fair; at all times it is equally likely to move up as down. The asymmetric random walk is not fair, due to its drift <span class="textup" >(<a
href="Stochastic-processes.html#eq:rw_drift">4.2</a>)</span>, but once we compensate for drift in <span class="textup" >(<a
href="Stochastic-processes.html#eq:drift_compensate">4.3</a>)</span> we do still obtain a martingale.
</p>

<p>
Then urn process requires more careful thought. For example, we might wonder:
</p>
<blockquote>

<p>
<i>Suppose that the first draw is red. Then, at time \(n=1\) we have two red balls and one black ball. So, the chance of drawing a red ball is now \(\frac {2}{3}\). How is this fair?!</i>
</p>
</blockquote>

<p>
To answer this question, let us make a number of points. Firstly, let us remind ourselves that the quantity which is a martingale is \(M_n\), the <i>proportion</i> of red balls in the urn.
</p>

<p>
Secondly, suppose that the first draw is indeed red. So, at \(n=1\) we have \(2\) red and \(1\) black, giving a proportion of \(\frac {2}{3}\) red and \(\frac 13\) black. The expected fraction of red balls after
the next (i.e.&nbsp;second) draw is
</p>

<p>
\[\frac 23\cdot \frac {(2+1)}{4}+\frac 13\cdot \frac 24=\frac {6+2}{12}=\frac 23\]
</p>

<p>
which is of course equal to the proportion of red balls that we had at \(n=1\).
</p>

<p>
Lastly, note that it is equally likely that, on the first go, you’d pick out a black. So, starting from \(n=0\) and looking forwards, both colors have equally good chances of increasing their own numbers. In fact, if we
were to pretend, right from the start, that black was red, and red was black, we would see the same urn process. This type of fairness is known as symmetry. We’ve seen that \(B_n\) tends to increase (because we
keep adding more balls), and we can think of \(M_n\) as a way of discovering the fairness ‘hiding’ inside of \(B_n\).
</p>

<p>
To sum up: in life there are different ways to think of ‘fairness’ – and what we need to do here is get a sense for precisely what kind of fairness martingales characterize. The fact that \(M_n\) is a martingale does not
prevent us from (sometimes) ending up with many more red balls than black, or vice versa. It just means that, when viewed in terms of \(M_n\), there is no bias towards red of black inherent in the rules of the game.
</p>

</section>

</div>

</div>

<footer>

<p>
Copyright Nic Freeman, Sheffield University, last updated January 24, 2022
</p>

</footer>



<nav class="botnavigation" ><a href="notes_1.html" class="linkhome" >
Home</a></nav>

</body>
</html>
